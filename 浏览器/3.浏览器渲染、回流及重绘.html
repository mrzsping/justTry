<!DOCTYPE html>
<!-- saved from url=(0037)https://zhuanlan.zhihu.com/p/53913989 -->
<html lang="zh" data-hairline="true" data-theme="light" style=""><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>深入浅出浏览器渲染原理 - 知乎</title><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta name="renderer" content="webkit"><meta name="force-rendering" content="webkit"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><meta name="google-site-verification" content="FTeR0c8arOPKh8c5DYh_9uu98_zJbaWw53J-Sch9MTg"><meta data-react-helmet="true" name="description" content="https://blog.fundebug.com/2019/01/03/understand-browser-rendering/摘要： 理解浏览器渲染。前言浏览器的内核是指支持浏览器运行的最核心的程序，分为两个部分的，一是渲染引擎，另一个是JS引擎。渲染引擎在不…"><meta data-react-helmet="true" property="og:title" content="深入浅出浏览器渲染原理"><meta data-react-helmet="true" property="og:url" content="https://zhuanlan.zhihu.com/p/53913989"><meta data-react-helmet="true" property="og:description" content="https://blog.fundebug.com/2019/01/03/understand-browser-rendering/摘要： 理解浏览器渲染。前言浏览器的内核是指支持浏览器运行的最核心的程序，分为两个部分的，一是渲染引擎，另一个是JS引擎。渲染引擎在不…"><meta data-react-helmet="true" property="og:image" content=""><meta data-react-helmet="true" property="og:type" content="article"><meta data-react-helmet="true" property="og:site_name" content="知乎专栏"><link data-react-helmet="true" rel="apple-touch-icon" href="https://static.zhihu.com/heifetz/assets/apple-touch-icon-152.67c7b278.png"><link data-react-helmet="true" rel="apple-touch-icon" href="https://static.zhihu.com/heifetz/assets/apple-touch-icon-152.67c7b278.png" sizes="152x152"><link data-react-helmet="true" rel="apple-touch-icon" href="https://static.zhihu.com/heifetz/assets/apple-touch-icon-120.b3e6278d.png" sizes="120x120"><link data-react-helmet="true" rel="apple-touch-icon" href="https://static.zhihu.com/heifetz/assets/apple-touch-icon-76.7a750095.png" sizes="76x76"><link data-react-helmet="true" rel="apple-touch-icon" href="https://static.zhihu.com/heifetz/assets/apple-touch-icon-60.a4a761d4.png" sizes="60x60"><link rel="shortcut icon" type="image/x-icon" href="https://static.zhihu.com/static/favicon.ico"><link rel="search" type="application/opensearchdescription+xml" href="https://static.zhihu.com/static/search.xml" title="知乎"><link rel="dns-prefetch" href="https://static.zhimg.com/"><link rel="dns-prefetch" href="https://pic1.zhimg.com/"><link rel="dns-prefetch" href="https://pic2.zhimg.com/"><link rel="dns-prefetch" href="https://pic3.zhimg.com/"><link rel="dns-prefetch" href="https://pic4.zhimg.com/"><style>
.u-safeAreaInset-top {
  height: constant(safe-area-inset-top) !important;
  height: env(safe-area-inset-top) !important;
  
}
.u-safeAreaInset-bottom {
  height: constant(safe-area-inset-bottom) !important;
  height: env(safe-area-inset-bottom) !important;
  
}
</style><link href="./深入浅出浏览器渲染原理 - 知乎_files/app.1c2227d807fa9528fa00.css" rel="stylesheet"><link rel="stylesheet"></head><body class="WhiteBg-body" data-react-helmet="class"><div id="root"><div class="App"><div class="LoadingBar"></div><main role="main" class="App-main"><div class="Post-content" data-zop-usertoken="{&quot;userToken&quot;:&quot;mrzsping&quot;}" data-zop="{&quot;authorName&quot;:&quot;Fundebug&quot;,&quot;itemId&quot;:53913989,&quot;title&quot;:&quot;深入浅出浏览器渲染原理&quot;,&quot;type&quot;:&quot;article&quot;}" data-za-detail-view-path-module="PostItem" data-za-extra-module="{&quot;card&quot;:{&quot;content&quot;:{&quot;type&quot;:&quot;Post&quot;,&quot;token&quot;:&quot;53913989&quot;}}}"><div class="ColumnPageHeader-Wrapper"><div><div class="Sticky ColumnPageHeader" style=""><div class="ColumnPageHeader-content"><a href="https://www.zhihu.com/" aria-label="知乎"><svg viewBox="0 0 200 91" class="Icon ZhihuLogo ZhihuLogo--blue Icon--logo" style="height:30px;width:64px" width="64" height="30" aria-hidden="true"><title></title><g><path d="M53.29 80.035l7.32.002 2.41 8.24 13.128-8.24h15.477v-67.98H53.29v67.978zm7.79-60.598h22.756v53.22h-8.73l-8.718 5.473-1.587-5.46-3.72-.012v-53.22zM46.818 43.162h-16.35c.545-8.467.687-16.12.687-22.955h15.987s.615-7.05-2.68-6.97H16.807c1.09-4.1 2.46-8.332 4.1-12.708 0 0-7.523 0-10.085 6.74-1.06 2.78-4.128 13.48-9.592 24.41 1.84-.2 7.927-.37 11.512-6.94.66-1.84.785-2.08 1.605-4.54h9.02c0 3.28-.374 20.9-.526 22.95H6.51c-3.67 0-4.863 7.38-4.863 7.38H22.14C20.765 66.11 13.385 79.24 0 89.62c6.403 1.828 12.784-.29 15.937-3.094 0 0 7.182-6.53 11.12-21.64L43.92 85.18s2.473-8.402-.388-12.496c-2.37-2.788-8.768-10.33-11.496-13.064l-4.57 3.627c1.363-4.368 2.183-8.61 2.46-12.71H49.19s-.027-7.38-2.372-7.38zm128.752-.502c6.51-8.013 14.054-18.302 14.054-18.302s-5.827-4.625-8.556-1.27c-1.874 2.548-11.51 15.063-11.51 15.063l6.012 4.51zm-46.903-18.462c-2.814-2.577-8.096.667-8.096.667s12.35 17.2 12.85 17.953l6.08-4.29s-8.02-11.752-10.83-14.33zM199.99 46.5c-6.18 0-40.908.292-40.953.292v-31.56c1.503 0 3.882-.124 7.14-.376 12.773-.753 21.914-1.25 27.427-1.504 0 0 3.817-8.496-.185-10.45-.96-.37-7.24 1.43-7.24 1.43s-51.63 5.153-72.61 5.64c.5 2.756 2.38 5.336 4.93 6.11 4.16 1.087 7.09.53 15.36.277 7.76-.5 13.65-.76 17.66-.76v31.19h-41.71s.88 6.97 7.97 7.14h33.73v22.16c0 4.364-3.498 6.87-7.65 6.6-4.4.034-8.15-.36-13.027-.566.623 1.24 1.977 4.496 6.035 6.824 3.087 1.502 5.054 2.053 8.13 2.053 9.237 0 14.27-5.4 14.027-14.16V53.93h38.235c3.026 0 2.72-7.432 2.72-7.432z" fill-rule="evenodd"></path></g></svg></a><i class="ColumnPageHeader-Line"></i><div class="ColumnPageHeader-Title"><a class="ColumnLink ColumnPageHeader-Link" href="https://zhuanlan.zhihu.com/fundebug"><img class="Avatar Avatar--round" width="30" height="30" src="./深入浅出浏览器渲染原理 - 知乎_files/v2-f4e072205be968bf035f63ef72b871ea_is.jpg" srcset="https://pic4.zhimg.com/v2-f4e072205be968bf035f63ef72b871ea_im.jpg 2x" alt="Fundebug"></a><div class="ColumnPageHeader-TitleName"><span class="ColumnPageHeader-TitleMeta">首发于</span><a class="ColumnLink ColumnPageHeader-TitleColumn" href="https://zhuanlan.zhihu.com/fundebug">Fundebug</a></div></div><div class="ColumnPageHeader-Button"><button type="button" class="Button FollowButton ColumnPageHeader-FollowButton Button--primary Button--blue">关注专栏</button><button type="button" class="Button ColumnPageHeader-WriteButton Button--blue"><svg class="Zi Zi--EditSurround" fill="currentColor" viewBox="0 0 24 24" width="24" height="24"><path d="M18.453 7.992l-1.833-1.65.964-.978a1.223 1.223 0 0 1 1.73-.012l.005.006a1.24 1.24 0 0 1 .007 1.748l-.873.886zm-1.178 1.194l-5.578 5.66-1.935.697a.393.393 0 0 1-.504-.504l.697-1.935 5.488-5.567 1.832 1.65zM7.58 5.848l5.654.006-1.539 1.991-3.666.012A1.02 1.02 0 0 0 7 8.868v7.993c0 .558.46 1.01 1.029 1.01l7.941-.01c.568 0 1.03-.453 1.03-1.012v-4.061l2-1.442v6.002c0 1.397-1.2 2.501-2.62 2.501H7.574C6.153 19.85 5 18.717 5 17.32V8.35c0-1.397 1.16-2.502 2.58-2.502z"></path></svg>写文章</button><div class="Popover"><button title="更多" type="button" id="Popover1-toggle" aria-haspopup="true" aria-expanded="false" aria-owns="Popover1-content" class="Button ColumnPageHeader-MenuToggler Button--plain"><svg class="Zi Zi--Dots" fill="currentColor" viewBox="0 0 24 24" width="24" height="24"><path d="M5 14a2 2 0 1 1 0-4 2 2 0 0 1 0 4zm7 0a2 2 0 1 1 0-4 2 2 0 0 1 0 4zm7 0a2 2 0 1 1 0-4 2 2 0 0 1 0 4z" fill-rule="evenodd"></path></svg></button></div></div></div></div></div></div><article class="Post-Main Post-NormalMain" tabindex="-1"><header class="Post-Header"><h1 class="Post-Title">深入浅出浏览器渲染原理</h1><div class="Post-Author"><div class="AuthorInfo" itemprop="author" itemscope="" itemtype="http://schema.org/Person"><meta itemprop="name" content="Fundebug"><meta itemprop="image" content="https://pic2.zhimg.com/v2-777d2d0550cca5b8de8059993dedf907_l.jpg"><meta itemprop="url" content="https://www.zhihu.com/people/fundebug"><meta itemprop="zhihu:followerCount"><span class="UserLink AuthorInfo-avatarWrapper"><div class="Popover"><div id="Popover2-toggle" aria-haspopup="true" aria-expanded="false" aria-owns="Popover2-content"><a class="UserLink-link" data-za-detail-view-element_name="User" target="_blank" href="https://www.zhihu.com/people/fundebug"><img class="Avatar Avatar--round AuthorInfo-avatar" width="38" height="38" src="./深入浅出浏览器渲染原理 - 知乎_files/v2-777d2d0550cca5b8de8059993dedf907_xs.jpg" srcset="https://pic2.zhimg.com/v2-777d2d0550cca5b8de8059993dedf907_l.jpg 2x" alt="Fundebug"></a></div></div></span><div class="AuthorInfo-content"><div class="AuthorInfo-head"><span class="UserLink AuthorInfo-name"><div class="Popover"><div id="Popover3-toggle" aria-haspopup="true" aria-expanded="false" aria-owns="Popover3-content"><a class="UserLink-link" data-za-detail-view-element_name="User" target="_blank" href="https://www.zhihu.com/people/fundebug">Fundebug</a></div></div></span></div><div class="AuthorInfo-detail"><div class="AuthorInfo-badge"><div class="ztext AuthorInfo-badgeText">一行代码搞定BUG监控：www.fundebug.com</div></div></div></div></div><button type="button" class="Button FollowButton Button--primary Button--blue"><span style="display:inline-flex;align-items:center">​<svg class="Zi Zi--Plus FollowButton-icon" fill="currentColor" viewBox="0 0 24 24" width="1.2em" height="1.2em"><path d="M13.491 10.488s-.012-5.387 0-5.998c-.037-1.987-3.035-1.987-2.997 0-.038 1.912 0 5.998 0 5.998H4.499c-1.999.01-1.999 3.009 0 3.009s5.995-.01 5.995-.01v5.999c0 2.019 3.006 2.019 2.997 0-.01-2.019 0-5.998 0-5.998s3.996.009 6.004.009c2.008 0 2.008-3-.01-3.009h-5.994z" fill-rule="evenodd"></path></svg></span>关注她</button></div><div><span class="Voters"><button type="button" class="Button Button--plain">54 人<!-- -->赞同了该文章</button></span></div></header><div class="Post-RichTextContainer"><div class="RichText ztext Post-RichText"><p></p><a target="_blank" href="https://link.zhihu.com/?target=https%3A//blog.fundebug.com/2019/01/03/understand-browser-rendering/" data-draft-node="block" data-draft-type="link-card" class="LinkCard LinkCard--noImage" data-za-detail-view-id="172"><span class="LinkCard-content"><span class="LinkCard-text"><span class="LinkCard-title" data-text="true">https://blog.fundebug.com/2019/01/03/understand-browser-rendering/</span><span class="LinkCard-meta"><span style="display:inline-flex;align-items:center">​<svg class="Zi Zi--InsertLink" fill="currentColor" viewBox="0 0 24 24" width="17" height="17"><path d="M6.77 17.23c-.905-.904-.94-2.333-.08-3.193l3.059-3.06-1.192-1.19-3.059 3.058c-1.489 1.489-1.427 3.954.138 5.519s4.03 1.627 5.519.138l3.059-3.059-1.192-1.192-3.059 3.06c-.86.86-2.289.824-3.193-.08zm3.016-8.673l1.192 1.192 3.059-3.06c.86-.86 2.289-.824 3.193.08.905.905.94 2.334.08 3.194l-3.059 3.06 1.192 1.19 3.059-3.058c1.489-1.489 1.427-3.954-.138-5.519s-4.03-1.627-5.519-.138L9.786 8.557zm-1.023 6.68c.33.33.863.343 1.177.029l5.34-5.34c.314-.314.3-.846-.03-1.176-.33-.33-.862-.344-1.176-.03l-5.34 5.34c-.314.314-.3.846.03 1.177z" fill-rule="evenodd"></path></svg></span>blog.fundebug.com</span></span><span class="LinkCard-imageCell"><div class="LinkCard-image LinkCard-image--default"><svg class="Zi Zi--Browser" fill="currentColor" viewBox="0 0 24 24" width="32" height="32"><path d="M11.991 3C7.023 3 3 7.032 3 12s4.023 9 8.991 9C16.968 21 21 16.968 21 12s-4.032-9-9.009-9zm6.237 5.4h-2.655a14.084 14.084 0 0 0-1.242-3.204A7.227 7.227 0 0 1 18.228 8.4zM12 4.836A12.678 12.678 0 0 1 13.719 8.4h-3.438A12.678 12.678 0 0 1 12 4.836zM5.034 13.8A7.418 7.418 0 0 1 4.8 12c0-.621.09-1.224.234-1.8h3.042A14.864 14.864 0 0 0 7.95 12c0 .612.054 1.206.126 1.8H5.034zm.738 1.8h2.655a14.084 14.084 0 0 0 1.242 3.204A7.188 7.188 0 0 1 5.772 15.6zm2.655-7.2H5.772a7.188 7.188 0 0 1 3.897-3.204c-.54.999-.954 2.079-1.242 3.204zM12 19.164a12.678 12.678 0 0 1-1.719-3.564h3.438A12.678 12.678 0 0 1 12 19.164zm2.106-5.364H9.894A13.242 13.242 0 0 1 9.75 12c0-.612.063-1.215.144-1.8h4.212c.081.585.144 1.188.144 1.8 0 .612-.063 1.206-.144 1.8zm.225 5.004c.54-.999.954-2.079 1.242-3.204h2.655a7.227 7.227 0 0 1-3.897 3.204zm1.593-5.004c.072-.594.126-1.188.126-1.8 0-.612-.054-1.206-.126-1.8h3.042c.144.576.234 1.179.234 1.8s-.09 1.224-.234 1.8h-3.042z"></path></svg></div></span></span></a><p><b>摘要：</b> 理解浏览器渲染。</p><h2>前言</h2><p>浏览器的内核是指支持浏览器运行的最核心的程序，分为两个部分的，一是渲染引擎，另一个是JS引擎。渲染引擎在不同的浏览器中也不是都相同的。比如在 Firefox 中叫做 Gecko，在 Chrome 和 Safari 中都是基于 WebKit 开发的。本文我们主要介绍关于 WebKit 的这部分渲染引擎内容以及几个相关的问题。</p><p><b>如需获取思维导图请猛戳<a href="https://link.zhihu.com/?target=https%3A//github.com/ljianshu/Blog" class=" wrap external" target="_blank" rel="nofollow noreferrer" data-za-detail-view-id="1043">GitHub博客</a></b></p><p class="ztext-empty-paragraph"><br></p><figure data-size="normal"><noscript><img src="https://pic4.zhimg.com/v2-5d8ee9d00bcc898318d1c9a8bf6684b7_b.jpg" data-caption="" data-size="normal" data-rawwidth="1624" data-rawheight="474" class="origin_image zh-lightbox-thumb" width="1624" data-original="https://pic4.zhimg.com/v2-5d8ee9d00bcc898318d1c9a8bf6684b7_r.jpg"/></noscript><img src="./深入浅出浏览器渲染原理 - 知乎_files/v2-5d8ee9d00bcc898318d1c9a8bf6684b7_hd.jpg" data-caption="" data-size="normal" data-rawwidth="1624" data-rawheight="474" class="origin_image zh-lightbox-thumb lazy" width="1624" data-original="https://pic4.zhimg.com/v2-5d8ee9d00bcc898318d1c9a8bf6684b7_r.jpg" data-actualsrc="https://pic4.zhimg.com/v2-5d8ee9d00bcc898318d1c9a8bf6684b7_b.jpg" data-lazy-status="ok"></figure><p class="ztext-empty-paragraph"><br></p><h2>浏览器工作大体流程</h2><p class="ztext-empty-paragraph"><br></p><figure data-size="normal"><noscript><img src="https://pic1.zhimg.com/v2-555af7445d2f24d0bba9106b138ef934_b.jpg" data-caption="" data-size="normal" data-rawwidth="705" data-rawheight="227" class="origin_image zh-lightbox-thumb" width="705" data-original="https://pic1.zhimg.com/v2-555af7445d2f24d0bba9106b138ef934_r.jpg"/></noscript><img src="./深入浅出浏览器渲染原理 - 知乎_files/v2-555af7445d2f24d0bba9106b138ef934_hd.jpg" data-caption="" data-size="normal" data-rawwidth="705" data-rawheight="227" class="origin_image zh-lightbox-thumb lazy" width="705" data-original="https://pic1.zhimg.com/v2-555af7445d2f24d0bba9106b138ef934_r.jpg" data-actualsrc="https://pic1.zhimg.com/v2-555af7445d2f24d0bba9106b138ef934_b.jpg" data-lazy-status="ok"></figure><p class="ztext-empty-paragraph"><br></p><p>浏览器工作流程大体分为如下三部分：</p><h2>1）浏览器会解析三个东西：</h2><ul><li>一个是HTML/SVG/XHTML，事实上，Webkit有三个C++的类对应这三类文档。解析这三种文件会产生一个DOM Tree。</li><li>CSS，解析CSS会产生CSS规则树。</li><li>Javascript，脚本，主要是通过DOM API和CSSOM API来操作DOM Tree和CSS Rule Tree.</li></ul><h2>2）解析完成后，浏览器引擎会通过DOM Tree 和 CSS Rule Tree 来构造 Rendering Tree。</h2><ul><li>Rendering Tree 渲染树并不等同于DOM树，因为一些像Header或display:none的东西就没必要放在渲染树中了。</li><li>CSS 的 Rule Tree主要是为了完成匹配并把CSS Rule附加上Rendering Tree上的每个Element。也就是DOM结点。也就是所谓的Frame。</li><li>然后，计算每个Frame（也就是每个Element）的位置，这又叫layout和reflow过程。</li></ul><h2>3）最后通过调用操作系统Native GUI的API绘制。</h2><blockquote><i>接下来我们针对这其中所经历的重要步骤，一一详细阐述。</i></blockquote><h2>构建DOM</h2><p>浏览器会遵守一套步骤将HTML 文件转换为 DOM 树。宏观上，可以分为几个步骤：</p><p class="ztext-empty-paragraph"><br></p><figure data-size="normal"><noscript><img src="https://pic2.zhimg.com/v2-e66906563b9a196c00cb8811236bc941_b.png" data-caption="" data-size="normal" data-rawwidth="623" data-rawheight="88" class="origin_image zh-lightbox-thumb" width="623" data-original="https://pic2.zhimg.com/v2-e66906563b9a196c00cb8811236bc941_r.jpg"/></noscript><img src="./深入浅出浏览器渲染原理 - 知乎_files/v2-e66906563b9a196c00cb8811236bc941_hd.png" data-caption="" data-size="normal" data-rawwidth="623" data-rawheight="88" class="origin_image zh-lightbox-thumb lazy" width="623" data-original="https://pic2.zhimg.com/v2-e66906563b9a196c00cb8811236bc941_r.jpg" data-actualsrc="https://pic2.zhimg.com/v2-e66906563b9a196c00cb8811236bc941_b.png" data-lazy-status="ok"></figure><p class="ztext-empty-paragraph"><br></p><ul><li>浏览器从磁盘或网络读取HTML的原始字节，并根据文件的指定编码（例如 UTF-8）将它们转换成字符串。</li></ul><p>在网络中传输的内容其实都是 0 和 1 这些字节数据。当浏览器接收到这些字节数据以后，它会将这些字节数据转换为字符串，也就是我们写的代码。</p><ul><li>将字符串转换成Token，例如：<code>&lt;html&gt;</code>、<code>&lt;body&gt;</code>等。<b>Token中会标识出当前Token是“开始标签”或是“结束标签”亦或是“文本”等信息</b>。</li></ul><p>这时候你一定会有疑问，节点与节点之间的关系如何维护？</p><p>事实上，这就是Token要标识“起始标签”和“结束标签”等标识的作用。例如“title”Token的起始标签和结束标签之间的节点肯定是属于“head”的子节点。</p><p class="ztext-empty-paragraph"><br></p><figure data-size="normal"><noscript><img src="https://pic2.zhimg.com/v2-f0ae41af7647a86873f0299c9aea31d5_b.jpg" data-caption="" data-size="normal" data-rawwidth="671" data-rawheight="168" class="origin_image zh-lightbox-thumb" width="671" data-original="https://pic2.zhimg.com/v2-f0ae41af7647a86873f0299c9aea31d5_r.jpg"/></noscript><img src="./深入浅出浏览器渲染原理 - 知乎_files/v2-f0ae41af7647a86873f0299c9aea31d5_hd.jpg" data-caption="" data-size="normal" data-rawwidth="671" data-rawheight="168" class="origin_image zh-lightbox-thumb lazy" width="671" data-original="https://pic2.zhimg.com/v2-f0ae41af7647a86873f0299c9aea31d5_r.jpg" data-actualsrc="https://pic2.zhimg.com/v2-f0ae41af7647a86873f0299c9aea31d5_b.jpg" data-lazy-status="ok"></figure><p class="ztext-empty-paragraph"><br></p><p>上图给出了节点之间的关系，例如：“Hello”Token位于“title”开始标签与“title”结束标签之间，表明“Hello”Token是“title”Token的子节点。同理“title”Token是“head”Token的子节点。</p><ul><li>生成节点对象并构建DOM</li></ul><p>事实上，构建DOM的过程中，不是等所有Token都转换完成后再去生成节点对象，而是一边生成Token一边消耗Token来生成节点对象。换句话说，每个Token被生成后，会立刻消耗这个Token创建出节点对象。<b>注意：带有结束标签标识的Token不会创建节点对象。</b></p><p>接下来我们举个例子，假设有段HTML文本：</p><div class="highlight"><pre><code class="language-html"><span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>Web page parsing<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span>Web page parsing<span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>This is an example Web page.<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span></code></pre></div><p>上面这段HTML会解析成这样：</p><p class="ztext-empty-paragraph"><br></p><figure data-size="normal"><noscript><img src="https://pic3.zhimg.com/v2-264b6ef49bdc36ebbd5180a4787af696_b.jpg" data-caption="" data-size="normal" data-rawwidth="468" data-rawheight="308" class="origin_image zh-lightbox-thumb" width="468" data-original="https://pic3.zhimg.com/v2-264b6ef49bdc36ebbd5180a4787af696_r.jpg"/></noscript><img src="./深入浅出浏览器渲染原理 - 知乎_files/v2-264b6ef49bdc36ebbd5180a4787af696_hd.jpg" data-caption="" data-size="normal" data-rawwidth="468" data-rawheight="308" class="origin_image zh-lightbox-thumb lazy" width="468" data-original="https://pic3.zhimg.com/v2-264b6ef49bdc36ebbd5180a4787af696_r.jpg" data-actualsrc="https://pic3.zhimg.com/v2-264b6ef49bdc36ebbd5180a4787af696_b.jpg" data-lazy-status="ok"></figure><p class="ztext-empty-paragraph"><br></p><h2>构建CSSOM</h2><p>DOM会捕获页面的内容，但浏览器还需要知道页面如何展示，所以需要构建CSSOM。</p><p>构建CSSOM的过程与构建DOM的过程非常相似，当浏览器接收到一段CSS，浏览器首先要做的是识别出Token，然后构建节点并生成CSSOM。</p><p>在这一过程中，浏览器会确定下每一个节点的样式到底是什么，并且这一过程其实是很消耗资源的。因为样式你可以自行设置给某个节点，也可以通过继承获得。在这一过程中，浏览器得递归 CSSOM 树，然后确定具体的元素到底是什么样式。</p><p><b>注意：CSS匹配HTML元素是一个相当复杂和有性能问题的事情。所以，DOM树要小，CSS尽量用id和class，千万不要过渡层叠下去</b>。</p><h2>构建渲染树</h2><p>当我们生成 DOM 树和 CSSOM 树以后，就需要将这两棵树组合为渲染树。</p><p class="ztext-empty-paragraph"><br></p><figure data-size="normal"><noscript><img src="https://pic2.zhimg.com/v2-71eb942f1ed509feaebcaed851ae819d_b.jpg" data-caption="" data-size="normal" data-rawwidth="689" data-rawheight="327" class="origin_image zh-lightbox-thumb" width="689" data-original="https://pic2.zhimg.com/v2-71eb942f1ed509feaebcaed851ae819d_r.jpg"/></noscript><img src="./深入浅出浏览器渲染原理 - 知乎_files/v2-71eb942f1ed509feaebcaed851ae819d_hd.jpg" data-caption="" data-size="normal" data-rawwidth="689" data-rawheight="327" class="origin_image zh-lightbox-thumb lazy" width="689" data-original="https://pic2.zhimg.com/v2-71eb942f1ed509feaebcaed851ae819d_r.jpg" data-actualsrc="https://pic2.zhimg.com/v2-71eb942f1ed509feaebcaed851ae819d_b.jpg" data-lazy-status="ok"></figure><p class="ztext-empty-paragraph"><br></p><p>在这一过程中，不是简单的将两者合并就行了。<b>渲染树只会包括需要显示的节点和这些节点的样式信息</b>，如果某个节点是 <code>display: none</code>的，那么就不会在渲染树中显示。</p><h2>布局与绘制</h2><p>当浏览器生成渲染树以后，就会根据渲染树来进行布局（也可以叫做回流）。这一阶段浏览器要做的事情是要弄清楚各个节点在页面中的确切位置和大小。通常这一行为也被称为“自动重排”。</p><p>布局流程的输出是一个“盒模型”，它会精确地捕获每个元素在视口内的确切位置和尺寸，所有相对测量值都将转换为屏幕上的绝对像素。</p><p>布局完成后，浏览器会立即发出“Paint Setup”和“Paint”事件，将渲染树转换成屏幕上的像素。</p><blockquote><i>以上我们详细介绍了浏览器工作流程中的重要步骤，接下来我们讨论几个相关的问题：</i></blockquote><h2>问题一：渲染过程中遇到JS文件怎么处理？</h2><p>JavaScript的加载、解析与执行会阻塞DOM的构建，也就是说，在构建DOM时，HTML解析器若遇到了JavaScript，那么它会暂停构建DOM，将控制权移交给JavaScript引擎，等JavaScript引擎运行完毕，浏览器再从中断的地方恢复DOM构建。</p><p>也就是说，如果你想首屏渲染的越快，就越不应该在首屏就加载 JS 文件，这也是都建议将 script 标签放在 body 标签底部的原因。当然在当下，并不是说 script 标签必须放在底部，因为你可以给 script 标签添加 defer 或者 async 属性（下文会介绍这两者的区别）。</p><p>JS文件不只是阻塞DOM的构建，它会导致CSSOM也阻塞DOM的构建。</p><p>原本DOM和CSSOM的构建是互不影响，井水不犯河水，但是一旦引入了JavaScript，CSSOM也开始阻塞DOM的构建，只有CSSOM构建完毕后，DOM再恢复DOM构建。</p><p>这是什么情况？</p><p>这是因为JavaScript不只是可以改DOM，它还可以更改样式，也就是它可以更改CSSOM。前面我们介绍，不完整的CSSOM是无法使用的，但JavaScript中想访问CSSOM并更改它，那么在执行JavaScript时，必须要能拿到完整的CSSOM。所以就导致了一个现象，如果浏览器尚未完成CSSOM的下载和构建，而我们却想在此时运行脚本，那么浏览器将延迟脚本执行和DOM构建，直至其完成CSSOM的下载和构建。也就是说，<b>在这种情况下，浏览器会先下载和构建CSSOM，然后再执行JavaScript，最后在继续构建DOM</b>。</p><h2>问题二：你真的了解回流和重绘吗</h2><p class="ztext-empty-paragraph"><br></p><figure data-size="normal"><noscript><img src="https://pic4.zhimg.com/v2-7857be6c43e653cca01bfebe64a8e5e7_b.jpg" data-caption="" data-size="normal" data-rawwidth="580" data-rawheight="265" class="origin_image zh-lightbox-thumb" width="580" data-original="https://pic4.zhimg.com/v2-7857be6c43e653cca01bfebe64a8e5e7_r.jpg"/></noscript><img src="./深入浅出浏览器渲染原理 - 知乎_files/v2-7857be6c43e653cca01bfebe64a8e5e7_hd.jpg" data-caption="" data-size="normal" data-rawwidth="580" data-rawheight="265" class="origin_image zh-lightbox-thumb lazy" width="580" data-original="https://pic4.zhimg.com/v2-7857be6c43e653cca01bfebe64a8e5e7_r.jpg" data-actualsrc="https://pic4.zhimg.com/v2-7857be6c43e653cca01bfebe64a8e5e7_b.jpg" data-lazy-status="ok"></figure><p class="ztext-empty-paragraph"><br></p><p>我们知道，当网页生成的时候，至少会渲染一次。在用户访问的过程中，还会不断重新渲染。重新渲染会重复上图中的第四步(回流)+第五步(重绘)或者只有第五个步(重绘)。</p><ul><li>重绘:当render tree中的一些元素需要更新属性，而这些属性只是影响元素的外观、风格，而不会影响布局的，比如background-color。</li><li>回流:当render tree中的一部分(或全部)因为元素的规模尺寸、布局、隐藏等改变而需要重新构建</li></ul><p><b>回流必定会发生重绘，重绘不一定会引发回流</b>。重绘和回流会在我们设置节点样式时频繁出现，同时也会很大程度上影响性能。回流所需的成本比重绘高的多，改变父节点里的子节点很可能会导致父节点的一系列回流。</p><h2>1）常见引起回流属性和方法</h2><p>任何会改变元素几何信息(元素的位置和尺寸大小)的操作，都会触发回流，</p><ul><li>添加或者删除可见的DOM元素；</li><li>元素尺寸改变——边距、填充、边框、宽度和高度</li><li>内容变化，比如用户在input框中输入文字</li><li>浏览器窗口尺寸改变——resize事件发生时</li><li>计算 offsetWidth 和 offsetHeight 属性</li><li>设置 style 属性的值</li></ul><p class="ztext-empty-paragraph"><br></p><figure data-size="normal"><noscript><img src="https://pic1.zhimg.com/v2-2f40649613c8a395aba42239edfde3fc_b.jpg" data-caption="" data-size="normal" data-rawwidth="585" data-rawheight="409" class="origin_image zh-lightbox-thumb" width="585" data-original="https://pic1.zhimg.com/v2-2f40649613c8a395aba42239edfde3fc_r.jpg"/></noscript><img src="./深入浅出浏览器渲染原理 - 知乎_files/v2-2f40649613c8a395aba42239edfde3fc_hd.jpg" data-caption="" data-size="normal" data-rawwidth="585" data-rawheight="409" class="origin_image zh-lightbox-thumb lazy" width="585" data-original="https://pic1.zhimg.com/v2-2f40649613c8a395aba42239edfde3fc_r.jpg" data-actualsrc="https://pic1.zhimg.com/v2-2f40649613c8a395aba42239edfde3fc_b.jpg" data-lazy-status="ok"></figure><p class="ztext-empty-paragraph"><br></p><h2>2）常见引起重绘属性和方法</h2><p class="ztext-empty-paragraph"><br></p><figure data-size="normal"><noscript><img src="https://pic4.zhimg.com/v2-be336593a1da8b4f65858af8aa2d761f_b.jpg" data-caption="" data-size="normal" data-rawwidth="554" data-rawheight="235" class="origin_image zh-lightbox-thumb" width="554" data-original="https://pic4.zhimg.com/v2-be336593a1da8b4f65858af8aa2d761f_r.jpg"/></noscript><img src="./深入浅出浏览器渲染原理 - 知乎_files/v2-be336593a1da8b4f65858af8aa2d761f_hd.jpg" data-caption="" data-size="normal" data-rawwidth="554" data-rawheight="235" class="origin_image zh-lightbox-thumb lazy" width="554" data-original="https://pic4.zhimg.com/v2-be336593a1da8b4f65858af8aa2d761f_r.jpg" data-actualsrc="https://pic4.zhimg.com/v2-be336593a1da8b4f65858af8aa2d761f_b.jpg" data-lazy-status="ok"></figure><p class="ztext-empty-paragraph"><br></p><p>下面例子中，触发了几次回流和重绘？</p><div class="highlight"><pre><code class="language-js"><span class="kd">var</span> <span class="nx">s</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">style</span><span class="p">;</span>
<span class="nx">s</span><span class="p">.</span><span class="nx">padding</span> <span class="o">=</span> <span class="s2">"2px"</span><span class="p">;</span> <span class="c1">// 回流+重绘
</span><span class="c1"></span><span class="nx">s</span><span class="p">.</span><span class="nx">border</span> <span class="o">=</span> <span class="s2">"1px solid red"</span><span class="p">;</span> <span class="c1">// 再一次 回流+重绘
</span><span class="c1"></span><span class="nx">s</span><span class="p">.</span><span class="nx">color</span> <span class="o">=</span> <span class="s2">"blue"</span><span class="p">;</span> <span class="c1">// 再一次重绘
</span><span class="c1"></span><span class="nx">s</span><span class="p">.</span><span class="nx">backgroundColor</span> <span class="o">=</span> <span class="s2">"#ccc"</span><span class="p">;</span> <span class="c1">// 再一次 重绘
</span><span class="c1"></span><span class="nx">s</span><span class="p">.</span><span class="nx">fontSize</span> <span class="o">=</span> <span class="s2">"14px"</span><span class="p">;</span> <span class="c1">// 再一次 回流+重绘
</span><span class="c1">// 添加node，再一次 回流+重绘
</span><span class="c1"></span><span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">createTextNode</span><span class="p">(</span><span class="s1">'abc!'</span><span class="p">));</span>
</code></pre></div><h2>3）如何减少回流、重绘</h2><ul><li>使用 transform 替代 top</li><li>使用 visibility 替换 display: none ，因为前者只会引起重绘，后者会引发回流（改变了布局）</li><li>不要把节点的属性值放在一个循环里当成循环里的变量。</li></ul><div class="highlight"><pre><code class="language-js"><span class="k">for</span><span class="p">(</span><span class="kd">let</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="mi">1000</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// 获取 offsetTop 会导致回流，因为需要去获取正确的值
</span><span class="c1"></span>    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s1">'.test'</span><span class="p">).</span><span class="nx">style</span><span class="p">.</span><span class="nx">offsetTop</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div><ul><li>不要使用 table 布局，可能很小的一个小改动会造成整个 table 的重新布局</li><li>动画实现的速度的选择，动画速度越快，回流次数越多，也可以选择使用 requestAnimationFrame</li><li>CSS 选择符从右往左匹配查找，避免节点层级过多</li><li>将频繁重绘或者回流的节点设置为图层，图层能够阻止该节点的渲染行为影响别的节点。比如对于 video 标签来说，浏览器会自动将该节点变为图层。</li></ul><h2>问题三：async和defer的作用是什么？有什么区别?</h2><p>接下来我们对比下 defer 和 async 属性的区别：</p><p class="ztext-empty-paragraph"><br></p><figure data-size="normal"><noscript><img src="https://pic4.zhimg.com/v2-909c198b7ef020ad8529cfa97f4ffd6f_b.jpg" data-caption="" data-size="normal" data-rawwidth="689" data-rawheight="112" class="origin_image zh-lightbox-thumb" width="689" data-original="https://pic4.zhimg.com/v2-909c198b7ef020ad8529cfa97f4ffd6f_r.jpg"/></noscript><img src="./深入浅出浏览器渲染原理 - 知乎_files/v2-909c198b7ef020ad8529cfa97f4ffd6f_hd.jpg" data-caption="" data-size="normal" data-rawwidth="689" data-rawheight="112" class="origin_image zh-lightbox-thumb lazy" width="689" data-original="https://pic4.zhimg.com/v2-909c198b7ef020ad8529cfa97f4ffd6f_r.jpg" data-actualsrc="https://pic4.zhimg.com/v2-909c198b7ef020ad8529cfa97f4ffd6f_b.jpg" data-lazy-status="ok"></figure><p class="ztext-empty-paragraph"><br></p><p>其中蓝色线代表JavaScript加载；红色线代表JavaScript执行；绿色线代表 HTML 解析。</p><h2>1）情况1<code>&lt;script src="script.js"&gt;&lt;/script&gt;</code></h2><p>没有 defer 或 async，浏览器会立即加载并执行指定的脚本，也就是说不等待后续载入的文档元素，读到就加载并执行。</p><h2>2）情况2<code>&lt;script async src="script.js"&gt;&lt;/script&gt;</code> (<b>异步下载</b>)</h2><p>async 属性表示异步执行引入的 JavaScript，与 defer 的区别在于，如果已经加载好，就会开始执行——无论此刻是 HTML 解析阶段还是 DOMContentLoaded 触发之后。需要注意的是，这种方式加载的 JavaScript 依然会阻塞 load 事件。换句话说，async-script 可能在 DOMContentLoaded 触发之前或之后执行，但一定在 load 触发之前执行。</p><h2>3）情况3 <code>&lt;script defer src="script.js"&gt;&lt;/script&gt;</code>(<b>延迟执行</b>)</h2><p>defer 属性表示延迟执行引入的 JavaScript，即这段 JavaScript 加载时 HTML 并未停止解析，这两个过程是并行的。整个 document 解析完毕且 defer-script 也加载完成之后（这两件事情的顺序无关），会执行所有由 defer-script 加载的 JavaScript 代码，然后触发 DOMContentLoaded 事件。</p><p>defer 与相比普通 script，有两点区别：**载入 JavaScript 文件时不阻塞 HTML 的解析，执行阶段被放到 HTML 标签解析完成之后。</p><p>在加载多个JS脚本的时候，async是无顺序的加载，而defer是有顺序的加载。**</p><h2>问题四：为什么操作 DOM 慢</h2><p>因为 DOM 是属于渲染引擎中的东西，而 JS 又是 JS 引擎中的东西。当我们通过 JS 操作 DOM 的时候，其实这个操作涉及到了两个线程之间的通信，那么势必会带来一些性能上的损耗。操作 DOM 次数一多，也就等同于一直在进行线程之间的通信，并且操作 DOM 可能还会带来重绘回流的情况，所以也就导致了性能上的问题。</p><h2>问题五：渲染页面时常见哪些不良现象？</h2><p><b>由于浏览器的渲染机制不同，在渲染页面时会出现两种常见的不良现象—-白屏问题和FOUS（无样式内容闪烁）</b></p><p>FOUC：由于浏览器渲染机制（比如firefox），再CSS加载之前，先呈现了HTML，就会导致展示出无样式内容，然后样式突然呈现的现象；</p><p>白屏：有些浏览器渲染机制（比如chrome）要先构建DOM树和CSSOM树，构建完成后再进行渲染，如果CSS部分放在HTML尾部，由于CSS未加载完成，浏览器迟迟未渲染，从而导致白屏；也可能是把js文件放在头部，脚本会阻塞后面内容的呈现，脚本会阻塞其后组件的下载，出现白屏问题。</p><h2>总结</h2><p class="ztext-empty-paragraph"><br></p><figure data-size="normal"><noscript><img src="https://pic1.zhimg.com/v2-55beee5c9129cb62e2655c7ed47eb190_b.jpg" data-caption="" data-size="normal" data-rawwidth="713" data-rawheight="195" class="origin_image zh-lightbox-thumb" width="713" data-original="https://pic1.zhimg.com/v2-55beee5c9129cb62e2655c7ed47eb190_r.jpg"/></noscript><img src="./深入浅出浏览器渲染原理 - 知乎_files/v2-55beee5c9129cb62e2655c7ed47eb190_hd.jpg" data-caption="" data-size="normal" data-rawwidth="713" data-rawheight="195" class="origin_image zh-lightbox-thumb lazy" width="713" data-original="https://pic1.zhimg.com/v2-55beee5c9129cb62e2655c7ed47eb190_r.jpg" data-actualsrc="https://pic1.zhimg.com/v2-55beee5c9129cb62e2655c7ed47eb190_b.jpg" data-lazy-status="ok"></figure><p class="ztext-empty-paragraph"><br></p><ul><li>浏览器工作流程：构建DOM -&gt; 构建CSSOM -&gt; 构建渲染树 -&gt; 布局 -&gt; 绘制。</li><li>CSSOM会阻塞渲染，只有当CSSOM构建完毕后才会进入下一个阶段构建渲染树。</li><li>通常情况下DOM和CSSOM是并行构建的，但是当浏览器遇到一个script标签时，DOM构建将暂停，直至脚本完成执行。但由于JavaScript可以修改CSSOM，所以需要等CSSOM构建完毕后再执行JS。</li><li>如果你想首屏渲染的越快，就越不应该在首屏就加载 JS 文件，建议将 script 标签放在 body 标签底部。</li></ul><h2>参考文章</h2><ul><li><a href="https://link.zhihu.com/?target=https%3A//segmentfault.com/q/1010000000640869" class=" wrap external" target="_blank" rel="nofollow noreferrer" data-za-detail-view-id="1043">async 和 defer 的区别 | SegmentFault</a></li><li><a href="https://link.zhihu.com/?target=https%3A//coolshell.cn/articles/9666.html" class=" wrap external" target="_blank" rel="nofollow noreferrer" data-za-detail-view-id="1043">浏览器的渲染原理简介</a></li><li><a href="https://link.zhihu.com/?target=https%3A//juejin.im/book/5bdc715fe51d454e755f75ef/section/5c024ecbf265da616a476638" class=" wrap external" target="_blank" rel="nofollow noreferrer" data-za-detail-view-id="1043">前端面试之道</a></li><li><a href="https://link.zhihu.com/?target=https%3A//juejin.im/entry/59e1d31f51882578c3411c77" class=" wrap external" target="_blank" rel="nofollow noreferrer" data-za-detail-view-id="1043">浏览器的渲染：过程与原理</a></li><li><a href="https://link.zhihu.com/?target=https%3A//segmentfault.com/a/1190000017329980" class=" wrap external" target="_blank" rel="nofollow noreferrer" data-za-detail-view-id="1043">你真的了解回流和重绘吗</a></li><li><a href="https://link.zhihu.com/?target=https%3A//mp.weixin.qq.com/s%3F__biz%3DMzA5NzkwNDk3MQ%3D%3D%26mid%3D2650588806%26idx%3D1%26sn%3D408a54e7c8102fd6944c9a40b119015a%26chksm%3D8891d6a2bfe65fb42f493fe9a4dab672dd7e440f31e753196cee0cfbc6696e4f8dd3a669e040%26mpshare%3D1%26scene%3D1%26srcid%3D1228ZrXsmbZKcgCSu7zTVDwy%23" class=" wrap external" target="_blank" rel="nofollow noreferrer" data-za-detail-view-id="1043">关键渲染路径</a></li><li><a href="https://link.zhihu.com/?target=https%3A//www.css88.com/archives/4996" class=" wrap external" target="_blank" rel="nofollow noreferrer" data-za-detail-view-id="1043">页面重绘和回流以及优化</a></li><li><a href="https://link.zhihu.com/?target=https%3A//juejin.im/post/5c15f797f265da61141c7f86" class=" wrap external" target="_blank" rel="nofollow noreferrer" data-za-detail-view-id="1043">浏览器重绘(repaint)重排(reflow)与优化[浏览器机制]</a></li></ul><p class="ztext-empty-paragraph"><br></p><h2>关于Fundebug</h2><p><br><a href="https://link.zhihu.com/?target=https%3A//www.fundebug.com/" class=" wrap external" target="_blank" rel="nofollow noreferrer" data-za-detail-view-id="1043">Fundebug</a>专注于JavaScript、微信小程序、微信小游戏、支付宝小程序、React Native、Node.js和Java线上应用实时BUG监控。 自从2016年双十一正式上线，Fundebug累计处理了9亿+错误事件，付费客户有Google、360、金山软件、百姓网等众多品牌企业。欢迎大家<a href="https://link.zhihu.com/?target=https%3A//www.fundebug.com/team/create" class=" wrap external" target="_blank" rel="nofollow noreferrer" data-za-detail-view-id="1043">免费试用</a>！</p><p class="ztext-empty-paragraph"><br></p><figure data-size="normal"><noscript><img src="https://pic1.zhimg.com/v2-3fac5a61d4630017310b198449c2a118_b.jpg" data-caption="" data-size="normal" data-rawwidth="494" data-rawheight="278" class="origin_image zh-lightbox-thumb" width="494" data-original="https://pic1.zhimg.com/v2-3fac5a61d4630017310b198449c2a118_r.jpg"/></noscript><img src="./深入浅出浏览器渲染原理 - 知乎_files/v2-3fac5a61d4630017310b198449c2a118_hd.jpg" data-caption="" data-size="normal" data-rawwidth="494" data-rawheight="278" class="origin_image zh-lightbox-thumb lazy" width="494" data-original="https://pic1.zhimg.com/v2-3fac5a61d4630017310b198449c2a118_r.jpg" data-actualsrc="https://pic1.zhimg.com/v2-3fac5a61d4630017310b198449c2a118_b.jpg" data-lazy-status="ok"></figure><p class="ztext-empty-paragraph"><br></p><h2>版权声明</h2><p><br>转载时请注明作者a href="<a href="https://link.zhihu.com/?target=https%3A//fundebug.com/" class=" external" target="_blank" rel="nofollow noreferrer" data-za-detail-view-id="1043"><span class="invisible">https://</span><span class="visible">fundebug.com/</span><span class="invisible"></span></a>"&gt; Fundebug以及本文地址：<br><b><a href="https://link.zhihu.com/?target=https%3A//blog.fundebug.com/2019/01/03/understand-browser-rendering/" class=" external" target="_blank" rel="nofollow noreferrer" data-za-detail-view-id="1043"><span class="invisible">https://</span><span class="visible">blog.fundebug.com/2019/</span><span class="invisible">01/03/understand-browser-rendering/</span><span class="ellipsis"></span></a></b></p></div></div><div class="ContentItem-time">发布于 2019-01-03</div><div class="Post-topicsAndReviewer"><div class="TopicList Post-Topics"><div class="Tag Topic" data-za-detail-view-path-module="TopicItem" data-za-extra-module="{&quot;card&quot;:{&quot;content&quot;:{&quot;type&quot;:&quot;Topic&quot;,&quot;token&quot;:&quot;19550901&quot;}}}"><span class="Tag-content"><a class="TopicLink" href="https://www.zhihu.com/topic/19550901" target="_blank"><div class="Popover"><div id="Popover4-toggle" aria-haspopup="true" aria-expanded="false" aria-owns="Popover4-content">前端开发</div></div></a></span></div><div class="Tag Topic" data-za-detail-view-path-module="TopicItem" data-za-extra-module="{&quot;card&quot;:{&quot;content&quot;:{&quot;type&quot;:&quot;Topic&quot;,&quot;token&quot;:&quot;19552330&quot;}}}"><span class="Tag-content"><a class="TopicLink" href="https://www.zhihu.com/topic/19552330" target="_blank"><div class="Popover"><div id="Popover5-toggle" aria-haspopup="true" aria-expanded="false" aria-owns="Popover5-content">程序员</div></div></a></span></div><div class="Tag Topic" data-za-detail-view-path-module="TopicItem" data-za-extra-module="{&quot;card&quot;:{&quot;content&quot;:{&quot;type&quot;:&quot;Topic&quot;,&quot;token&quot;:&quot;19552572&quot;}}}"><span class="Tag-content"><a class="TopicLink" href="https://www.zhihu.com/topic/19552572" target="_blank"><div class="Popover"><div id="Popover6-toggle" aria-haspopup="true" aria-expanded="false" aria-owns="Popover6-content">网页浏览器</div></div></a></span></div></div></div><div><div class="Sticky RichContent-actions is-fixed is-bottom" style="width: 690px; bottom: 0px; left: 320.5px;"><div class="ContentItem-actions" data-za-detail-view-path-module="BottomBar" data-za-extra-module="{&quot;card&quot;:{&quot;content&quot;:{&quot;type&quot;:&quot;Post&quot;,&quot;id&quot;:&quot;53913989&quot;}}}"><span><button aria-label="赞同 54" type="button" class="Button VoteButton VoteButton--up"><span style="display:inline-flex;align-items:center">​<svg class="Zi Zi--TriangleUp VoteButton-TriangleUp" fill="currentColor" viewBox="0 0 24 24" width="10" height="10"><path d="M2 18.242c0-.326.088-.532.237-.896l7.98-13.203C10.572 3.57 11.086 3 12 3c.915 0 1.429.571 1.784 1.143l7.98 13.203c.15.364.236.57.236.896 0 1.386-.875 1.9-1.955 1.9H3.955c-1.08 0-1.955-.517-1.955-1.9z" fill-rule="evenodd"></path></svg></span>赞同 54</button><button aria-label="反对" type="button" class="Button VoteButton VoteButton--down"><span style="display:inline-flex;align-items:center">​<svg class="Zi Zi--TriangleDown" fill="currentColor" viewBox="0 0 24 24" width="10" height="10"><path d="M20.044 3H3.956C2.876 3 2 3.517 2 4.9c0 .326.087.533.236.896L10.216 19c.355.571.87 1.143 1.784 1.143s1.429-.572 1.784-1.143l7.98-13.204c.149-.363.236-.57.236-.896 0-1.386-.876-1.9-1.956-1.9z" fill-rule="evenodd"></path></svg></span></button></span><button type="button" class="Button BottomActions-CommentBtn Button--plain Button--withIcon Button--withLabel"><span style="display:inline-flex;align-items:center">​<svg class="Zi Zi--Comment Button-zi" fill="currentColor" viewBox="0 0 24 24" width="1.2em" height="1.2em"><path d="M10.241 19.313a.97.97 0 0 0-.77.2 7.908 7.908 0 0 1-3.772 1.482.409.409 0 0 1-.38-.637 5.825 5.825 0 0 0 1.11-2.237.605.605 0 0 0-.227-.59A7.935 7.935 0 0 1 3 11.25C3 6.7 7.03 3 12 3s9 3.7 9 8.25-4.373 9.108-10.759 8.063z" fill-rule="evenodd"></path></svg></span>4 条评论</button><div class="Popover ShareMenu"><div class="ShareMenu-toggler" id="Popover7-toggle" aria-haspopup="true" aria-expanded="false" aria-owns="Popover7-content"><button type="button" class="Button Button--plain Button--withIcon Button--withLabel"><span style="display:inline-flex;align-items:center">​<svg class="Zi Zi--Share Button-zi" fill="currentColor" viewBox="0 0 24 24" width="1.2em" height="1.2em"><path d="M2.931 7.89c-1.067.24-1.275 1.669-.318 2.207l5.277 2.908 8.168-4.776c.25-.127.477.198.273.39L9.05 14.66l.927 5.953c.18 1.084 1.593 1.376 2.182.456l9.644-15.242c.584-.892-.212-2.029-1.234-1.796L2.93 7.89z" fill-rule="evenodd"></path></svg></span>分享</button></div></div><button type="button" class="Button ContentItem-action Button--plain Button--withIcon Button--withLabel"><span style="display:inline-flex;align-items:center">​<svg class="Zi Zi--Star Button-zi" fill="currentColor" viewBox="0 0 24 24" width="1.2em" height="1.2em"><path d="M5.515 19.64l.918-5.355-3.89-3.792c-.926-.902-.639-1.784.64-1.97L8.56 7.74l2.404-4.871c.572-1.16 1.5-1.16 2.072 0L15.44 7.74l5.377.782c1.28.186 1.566 1.068.64 1.97l-3.89 3.793.918 5.354c.219 1.274-.532 1.82-1.676 1.218L12 18.33l-4.808 2.528c-1.145.602-1.896.056-1.677-1.218z" fill-rule="evenodd"></path></svg></span>收藏</button><div class="Post-ActionMenuButton"><div class="Popover"><div id="Popover8-toggle" aria-haspopup="true" aria-expanded="false" aria-owns="Popover8-content"><button type="button" class="Button Button--plain Button--withIcon Button--iconOnly"><span style="display:inline-flex;align-items:center">​<svg class="Zi Zi--Dots Button-zi" fill="currentColor" viewBox="0 0 24 24" width="1.2em" height="1.2em"><path d="M5 14a2 2 0 1 1 0-4 2 2 0 0 1 0 4zm7 0a2 2 0 1 1 0-4 2 2 0 0 1 0 4zm7 0a2 2 0 1 1 0-4 2 2 0 0 1 0 4z" fill-rule="evenodd"></path></svg></span></button></div></div></div></div></div><div class="Sticky--holder" style="position: static; top: auto; right: auto; bottom: 0px; left: 0px; display: block; float: none; margin: 0px 0px 10px; height: 54px;"></div></div></article><div class="Post-Sub Post-NormalSub"><div class="PostIndex-Contributions" data-za-detail-view-path-module="ColumnList" data-za-detail-view-path-module_name="文章被以下专栏收录" data-za-extra-module="{&quot;card&quot;:{&quot;content&quot;:null}}"><h3 class="BlockTitle">文章被以下专栏收录</h3><ul><div class="ContentItem Column-ColumnItem"><div class="ContentItem-main"><div class="ContentItem-image"><a class="ColumnLink" href="https://zhuanlan.zhihu.com/fundebug"><div class="Popover"><div id="Popover9-toggle" aria-haspopup="true" aria-expanded="false" aria-owns="Popover9-content"><img class="Avatar Avatar--medium Avatar--round" width="40" height="40" src="./深入浅出浏览器渲染原理 - 知乎_files/v2-f4e072205be968bf035f63ef72b871ea_xs.jpg" srcset="https://pic4.zhimg.com/v2-f4e072205be968bf035f63ef72b871ea_l.jpg 2x" alt="Fundebug"></div></div></a></div><div class="ContentItem-head"><h2 class="ContentItem-title"><a class="ColumnLink ColumnItem-Title" href="https://zhuanlan.zhihu.com/fundebug"><div class="Popover"><div id="Popover10-toggle" aria-haspopup="true" aria-expanded="false" aria-owns="Popover10-content">Fundebug</div></div></a></h2></div><div class="ContentItem-extra"><button type="button" class="Button FollowButton Button--primary Button--blue">关注专栏</button></div></div></div></ul></div><div class="Recommendations-Main" style="width: 1331px;"><h3 class="BlockTitle Recommendations-BlockTitle">推荐阅读</h3><ul class="Recommendations-List"><button class="PagingButton PagingButton-Previous" disabled=""><svg class="Zi Zi--ArrowLeft" fill="#d3d3d3" viewBox="0 0 24 24" width="40" height="40"><path d="M14.782 16.78a.737.737 0 0 1-1.052 0L9.218 12.53a.758.758 0 0 1 0-1.063L13.73 7.22a.737.737 0 0 1 1.052 0c.29.294.29.77.001 1.063L11 12l3.782 3.716c.29.294.29.77 0 1.063z" fill-rule="evenodd"></path></svg></button><a href="https://zhuanlan.zhihu.com/p/47407398" class="PostItem"><div><img src="./深入浅出浏览器渲染原理 - 知乎_files/v2-f7e8e813d292944632530dda6ce1b976_250x0.jpg" srcset="https://pic2.zhimg.com/v2-f7e8e813d292944632530dda6ce1b976_qhd.jpg 2x" class="PostItem-TitleImage" alt="图解浏览器的基本工作原理"><h1 class="PostItem-Title">图解浏览器的基本工作原理</h1><div class="PostItem-Footer"><span>zhangwang</span><span class="PostItem-FooterTitle"></span></div></div></a><a href="https://zhuanlan.zhihu.com/p/24770877" class="PostItem"><div><img src="./深入浅出浏览器渲染原理 - 知乎_files/v2-6bcea2601a5fb36fa7854f4f6dc13923_250x0.jpg" srcset="https://pic3.zhimg.com/v2-6bcea2601a5fb36fa7854f4f6dc13923_qhd.jpg 2x" class="PostItem-TitleImage" alt="用 Chrome 调试你的 JavaScript"><h1 class="PostItem-Title">用 Chrome 调试你的 JavaScript</h1><div class="PostItem-Footer"><span>编译青春</span><span class="PostItem-FooterTitle">发表于前端解忧杂...</span></div></div></a><a href="https://zhuanlan.zhihu.com/p/34662800" class="PostItem"><div><h1 class="PostItem-Title">从Chrome源码看HTTP/2</h1><p class="PostItem-Summary">我在《怎样把网站升级到http/2》介绍了升级到http/2的方法，并说明了http/2的优点：http头部压缩多路复用Server Push下面一一进行说明。1. 头部压缩为什么要进行头部压缩呢？我在《WebSocke…</p><div class="PostItem-Footer"><span>李银城</span><span class="PostItem-FooterTitle"></span></div></div></a><a href="https://zhuanlan.zhihu.com/p/30290270" class="PostItem"><div><img src="./深入浅出浏览器渲染原理 - 知乎_files/v2-d0cad4960d9bf410e807d9ac77217b63_250x0.jpg" srcset="https://pic1.zhimg.com/v2-d0cad4960d9bf410e807d9ac77217b63_qhd.jpg 2x" class="PostItem-TitleImage" alt="浏览器内的事件队列"><h1 class="PostItem-Title">浏览器内的事件队列</h1><div class="PostItem-Footer"><span>大转转FE</span><span class="PostItem-FooterTitle"></span></div></div></a><button class="PagingButton PagingButton-Next"><svg class="Zi Zi--ArrowRight" fill="#d3d3d3" viewBox="0 0 24 24" width="40" height="40"><path d="M9.218 16.78a.737.737 0 0 0 1.052 0l4.512-4.249a.758.758 0 0 0 0-1.063L10.27 7.22a.737.737 0 0 0-1.052 0 .759.759 0 0 0-.001 1.063L13 12l-3.782 3.716a.758.758 0 0 0 0 1.063z" fill-rule="evenodd"></path></svg></button></ul></div><div class="Comments-container" data-za-detail-view-path-module="CommentList" data-za-extra-module="{&quot;card&quot;:{&quot;content&quot;:null}}"><div class="CommentsV2 CommentsV2--withEditor CommentsV2-withPagination"><div class="Topbar CommentTopbar"><div class="Topbar-title"><h2 class="CommentTopbar-title">4 条评论</h2></div><div class="Topbar-options"><button type="button" class="Button Button--plain Button--withIcon Button--withLabel"><span style="display: inline-flex; align-items: center;">​<svg class="Zi Zi--Switch Button-zi" fill="currentColor" viewBox="0 0 24 24" width="1.2em" height="1.2em"><path d="M13.004 7V4.232c0-.405.35-.733.781-.733.183 0 .36.06.501.17l6.437 5.033c.331.26.376.722.1 1.033a.803.803 0 0 1-.601.264H2.75a.75.75 0 0 1-.75-.75V7.75A.75.75 0 0 1 2.75 7h10.254zm-1.997 9.999v2.768c0 .405-.35.733-.782.733a.814.814 0 0 1-.5-.17l-6.437-5.034a.702.702 0 0 1-.1-1.032.803.803 0 0 1 .6-.264H21.25a.75.75 0 0 1 .75.75v1.499a.75.75 0 0 1-.75.75H11.007z" fill-rule="evenodd"></path></svg></span>切换为时间排序</button></div></div><div class="CommentsV2-footer CommentEditorV2--normal"><div class="CommentEditorV2-inputWrap"><div class="CommentEditorV2-input Input-wrapper Input-wrapper--spread Input-wrapper--large Input-wrapper--noPadding"><div class="Input Editable"><div class="Dropzone RichText RichText--editable RichText--clearBoth ztext" style="min-height: 198px;"><div class="DraftEditor-root"><div class="public-DraftEditorPlaceholder-root"><div class="public-DraftEditorPlaceholder-inner" id="placeholder-d1mf7" style="white-space: pre-wrap;">写下你的评论...</div></div><div class="DraftEditor-editorContainer"><div aria-describedby="placeholder-d1mf7" class="notranslate public-DraftEditor-content" contenteditable="true" role="textbox" spellcheck="true" tabindex="0" style="outline: none; user-select: text; white-space: pre-wrap; overflow-wrap: break-word;"><div data-contents="true"><div class="Editable-unstyled" data-block="true" data-editor="d1mf7" data-offset-key="e3u08-0-0"><div data-offset-key="e3u08-0-0" class="public-DraftStyleDefault-block public-DraftStyleDefault-ltr"><span data-offset-key="e3u08-0-0"><br data-text="true"></span></div></div></div></div></div></div></div><input multiple="" type="file" accept="image/jpg,image/jpeg,image/png,image/gif" style="display: none;"><div></div></div></div><div class="CommentEditorV2-inputUpload"><div class="CommentEditorV2-popoverWrap"><div class="Popover CommentEditorV2-inputUpLoad-Icon"><button aria-label="插入表情" data-tooltip="插入表情" data-tooltip-position="bottom" data-tooltip-will-hide-on-click="true" id="Popover11-toggle" aria-haspopup="true" aria-expanded="false" aria-owns="Popover11-content" type="button" class="Button Editable-control Button--plain"><svg class="Zi Zi--Emotion" fill="currentColor" viewBox="0 0 24 24" width="24" height="24"><path d="M7.523 13.5h8.954c-.228 2.47-2.145 4-4.477 4-2.332 0-4.25-1.53-4.477-4zM12 21a9 9 0 1 1 0-18 9 9 0 0 1 0 18zm0-1.5a7.5 7.5 0 1 0 0-15 7.5 7.5 0 0 0 0 15zm-3-8a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm6 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3z"></path></svg></button></div></div></div></div><button disabled="" type="button" class="Button CommentEditorV2-singleButton Button--primary Button--blue">发布</button></div><div><div class="CommentListV2"><ul class="NestComment"><li class="NestComment--rootCommentNoChild"><div class="CommentItemV2"><div><div class="CommentItemV2-meta"><span class="UserLink CommentItemV2-avatar"><div class="Popover"><div id="Popover12-toggle" aria-haspopup="true" aria-expanded="false" aria-owns="Popover12-content"><a class="UserLink-link" data-za-detail-view-element_name="User" target="_blank" href="https://www.zhihu.com/people/walker2016-84"><img class="Avatar UserLink-avatar" width="24" height="24" src="./深入浅出浏览器渲染原理 - 知乎_files/v2-a2ff70a3078097297b0183fa85297795_s.jpg" srcset="https://pic4.zhimg.com/v2-a2ff70a3078097297b0183fa85297795_xs.jpg 2x" alt="walker2016"></a></div></div></span><span class="UserLink"><a class="UserLink-link" data-za-detail-view-element_name="User" target="_blank" href="https://www.zhihu.com/people/walker2016-84">walker2016</a></span><span class="CommentItemV2-time">6 个月前</span></div><div class="CommentItemV2-metaSibling"><div class="CommentRichText CommentItemV2-content"><div class="RichText ztext">我的天 这么好的文章没人吗</div></div><div class="CommentItemV2-footer"><button type="button" class="Button CommentItemV2-likeBtn Button--plain"><span style="display: inline-flex; align-items: center;">​<svg class="Zi Zi--Like" fill="currentColor" viewBox="0 0 24 24" width="16" height="16" style="margin-right: 5px;"><path d="M14.445 9h5.387s2.997.154 1.95 3.669c-.168.51-2.346 6.911-2.346 6.911s-.763 1.416-2.86 1.416H8.989c-1.498 0-2.005-.896-1.989-2v-7.998c0-.987.336-2.032 1.114-2.639 4.45-3.773 3.436-4.597 4.45-5.83.985-1.13 3.2-.5 3.037 2.362C15.201 7.397 14.445 9 14.445 9zM3 9h2a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V10a1 1 0 0 1 1-1z" fill-rule="evenodd"></path></svg></span>1</button><button type="button" class="Button CommentItemV2-hoverBtn Button--plain"><span style="display: inline-flex; align-items: center;">​<svg class="Zi Zi--Reply" fill="currentColor" viewBox="0 0 24 24" width="16" height="16" style="margin-right: 5px;"><path d="M22.959 17.22c-1.686-3.552-5.128-8.062-11.636-8.65-.539-.053-1.376-.436-1.376-1.561V4.678c0-.521-.635-.915-1.116-.521L1.469 10.67a1.506 1.506 0 0 0-.1 2.08s6.99 6.818 7.443 7.114c.453.295 1.136.124 1.135-.501V17a1.525 1.525 0 0 1 1.532-1.466c1.186-.139 7.597-.077 10.33 2.396 0 0 .396.257.536.257.892 0 .614-.967.614-.967z" fill-rule="evenodd"></path></svg></span>回复</button><button type="button" class="Button CommentItemV2-hoverBtn Button--plain"><span style="display: inline-flex; align-items: center;">​<svg class="Zi Zi--Like" fill="currentColor" viewBox="0 0 24 24" width="16" height="16" style="transform: rotate(180deg); margin-right: 5px;"><path d="M14.445 9h5.387s2.997.154 1.95 3.669c-.168.51-2.346 6.911-2.346 6.911s-.763 1.416-2.86 1.416H8.989c-1.498 0-2.005-.896-1.989-2v-7.998c0-.987.336-2.032 1.114-2.639 4.45-3.773 3.436-4.597 4.45-5.83.985-1.13 3.2-.5 3.037 2.362C15.201 7.397 14.445 9 14.445 9zM3 9h2a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V10a1 1 0 0 1 1-1z" fill-rule="evenodd"></path></svg></span>踩</button><button type="button" class="Button CommentItemV2-hoverBtn Button--plain"><span style="display: inline-flex; align-items: center;">​<svg class="Zi Zi--Report" fill="currentColor" viewBox="0 0 24 24" width="16" height="16" style="margin-right: 5px;"><path d="M19.947 3.129c-.633.136-3.927.639-5.697.385-3.133-.45-4.776-2.54-9.949-.888-.997.413-1.277 1.038-1.277 2.019L3 20.808c0 .3.101.54.304.718a.97.97 0 0 0 .73.304c.275 0 .519-.102.73-.304.202-.179.304-.418.304-.718v-6.58c4.533-1.235 8.047.668 8.562.864 2.343.893 5.542.008 6.774-.657.397-.178.596-.474.596-.887V3.964c0-.599-.42-.972-1.053-.835z" fill-rule="evenodd"></path></svg></span>举报</button></div></div></div></div></li></ul><ul class="NestComment"><li class="NestComment--rootComment"><div class="CommentItemV2"><div><div class="CommentItemV2-meta"><span class="UserLink CommentItemV2-avatar"><div class="Popover"><div id="Popover13-toggle" aria-haspopup="true" aria-expanded="false" aria-owns="Popover13-content"><a class="UserLink-link" data-za-detail-view-element_name="User" target="_blank" href="https://www.zhihu.com/people/walker2016-84"><img class="Avatar UserLink-avatar" width="24" height="24" src="./深入浅出浏览器渲染原理 - 知乎_files/v2-a2ff70a3078097297b0183fa85297795_s.jpg" srcset="https://pic4.zhimg.com/v2-a2ff70a3078097297b0183fa85297795_xs.jpg 2x" alt="walker2016"></a></div></div></span><span class="UserLink"><a class="UserLink-link" data-za-detail-view-element_name="User" target="_blank" href="https://www.zhihu.com/people/walker2016-84">walker2016</a></span><span class="CommentItemV2-time">6 个月前</span></div><div class="CommentItemV2-metaSibling"><div class="CommentRichText CommentItemV2-content"><div class="RichText ztext">您好，请问js阻塞dom解析，那万一js正好要操作的dom节点还不在dom树里怎么办</div></div><div class="CommentItemV2-footer"><button type="button" class="Button CommentItemV2-likeBtn Button--plain"><span style="display: inline-flex; align-items: center;">​<svg class="Zi Zi--Like" fill="currentColor" viewBox="0 0 24 24" width="16" height="16" style="margin-right: 5px;"><path d="M14.445 9h5.387s2.997.154 1.95 3.669c-.168.51-2.346 6.911-2.346 6.911s-.763 1.416-2.86 1.416H8.989c-1.498 0-2.005-.896-1.989-2v-7.998c0-.987.336-2.032 1.114-2.639 4.45-3.773 3.436-4.597 4.45-5.83.985-1.13 3.2-.5 3.037 2.362C15.201 7.397 14.445 9 14.445 9zM3 9h2a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V10a1 1 0 0 1 1-1z" fill-rule="evenodd"></path></svg></span>赞</button><button type="button" class="Button CommentItemV2-hoverBtn Button--plain"><span style="display: inline-flex; align-items: center;">​<svg class="Zi Zi--Reply" fill="currentColor" viewBox="0 0 24 24" width="16" height="16" style="margin-right: 5px;"><path d="M22.959 17.22c-1.686-3.552-5.128-8.062-11.636-8.65-.539-.053-1.376-.436-1.376-1.561V4.678c0-.521-.635-.915-1.116-.521L1.469 10.67a1.506 1.506 0 0 0-.1 2.08s6.99 6.818 7.443 7.114c.453.295 1.136.124 1.135-.501V17a1.525 1.525 0 0 1 1.532-1.466c1.186-.139 7.597-.077 10.33 2.396 0 0 .396.257.536.257.892 0 .614-.967.614-.967z" fill-rule="evenodd"></path></svg></span>回复</button><button type="button" class="Button CommentItemV2-hoverBtn Button--plain"><span style="display: inline-flex; align-items: center;">​<svg class="Zi Zi--Like" fill="currentColor" viewBox="0 0 24 24" width="16" height="16" style="transform: rotate(180deg); margin-right: 5px;"><path d="M14.445 9h5.387s2.997.154 1.95 3.669c-.168.51-2.346 6.911-2.346 6.911s-.763 1.416-2.86 1.416H8.989c-1.498 0-2.005-.896-1.989-2v-7.998c0-.987.336-2.032 1.114-2.639 4.45-3.773 3.436-4.597 4.45-5.83.985-1.13 3.2-.5 3.037 2.362C15.201 7.397 14.445 9 14.445 9zM3 9h2a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V10a1 1 0 0 1 1-1z" fill-rule="evenodd"></path></svg></span>踩</button><button type="button" class="Button CommentItemV2-hoverBtn Button--plain"><span style="display: inline-flex; align-items: center;">​<svg class="Zi Zi--Report" fill="currentColor" viewBox="0 0 24 24" width="16" height="16" style="margin-right: 5px;"><path d="M19.947 3.129c-.633.136-3.927.639-5.697.385-3.133-.45-4.776-2.54-9.949-.888-.997.413-1.277 1.038-1.277 2.019L3 20.808c0 .3.101.54.304.718a.97.97 0 0 0 .73.304c.275 0 .519-.102.73-.304.202-.179.304-.418.304-.718v-6.58c4.533-1.235 8.047.668 8.562.864 2.343.893 5.542.008 6.774-.657.397-.178.596-.474.596-.887V3.964c0-.599-.42-.972-1.053-.835z" fill-rule="evenodd"></path></svg></span>举报</button></div></div></div></div></li><li class="NestComment--child"><div class="CommentItemV2"><div><div class="CommentItemV2-meta"><span class="UserLink CommentItemV2-avatar"><div class="Popover"><div id="Popover14-toggle" aria-haspopup="true" aria-expanded="false" aria-owns="Popover14-content"><a class="UserLink-link" data-za-detail-view-element_name="User" target="_blank" href="https://www.zhihu.com/people/li-zong-84-26"><img class="Avatar UserLink-avatar" width="24" height="24" src="./深入浅出浏览器渲染原理 - 知乎_files/da8e974dc_s.jpg" srcset="https://pic4.zhimg.com/da8e974dc_xs.jpg 2x" alt="李微笑"></a></div></div></span><span class="UserLink"><a class="UserLink-link" data-za-detail-view-element_name="User" target="_blank" href="https://www.zhihu.com/people/li-zong-84-26">李微笑</a></span><span class="CommentItemV2-reply">回复</span><span class="UserLink"><a class="UserLink-link" data-za-detail-view-element_name="User" target="_blank" href="https://www.zhihu.com/people/walker2016-84">walker2016</a></span><span class="CommentItemV2-time">2 个月前</span></div><div class="CommentItemV2-metaSibling"><div class="CommentRichText CommentItemV2-content"><div class="RichText ztext"><p>会报错</p></div></div><div class="CommentItemV2-footer"><button type="button" class="Button CommentItemV2-likeBtn Button--plain"><span style="display: inline-flex; align-items: center;">​<svg class="Zi Zi--Like" fill="currentColor" viewBox="0 0 24 24" width="16" height="16" style="margin-right: 5px;"><path d="M14.445 9h5.387s2.997.154 1.95 3.669c-.168.51-2.346 6.911-2.346 6.911s-.763 1.416-2.86 1.416H8.989c-1.498 0-2.005-.896-1.989-2v-7.998c0-.987.336-2.032 1.114-2.639 4.45-3.773 3.436-4.597 4.45-5.83.985-1.13 3.2-.5 3.037 2.362C15.201 7.397 14.445 9 14.445 9zM3 9h2a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V10a1 1 0 0 1 1-1z" fill-rule="evenodd"></path></svg></span>赞</button><button type="button" class="Button CommentItemV2-hoverBtn Button--plain"><span style="display: inline-flex; align-items: center;">​<svg class="Zi Zi--Reply" fill="currentColor" viewBox="0 0 24 24" width="16" height="16" style="margin-right: 5px;"><path d="M22.959 17.22c-1.686-3.552-5.128-8.062-11.636-8.65-.539-.053-1.376-.436-1.376-1.561V4.678c0-.521-.635-.915-1.116-.521L1.469 10.67a1.506 1.506 0 0 0-.1 2.08s6.99 6.818 7.443 7.114c.453.295 1.136.124 1.135-.501V17a1.525 1.525 0 0 1 1.532-1.466c1.186-.139 7.597-.077 10.33 2.396 0 0 .396.257.536.257.892 0 .614-.967.614-.967z" fill-rule="evenodd"></path></svg></span>回复</button><button type="button" class="Button CommentItemV2-hoverBtn Button--plain"><span style="display: inline-flex; align-items: center;">​<svg class="Zi Zi--Like" fill="currentColor" viewBox="0 0 24 24" width="16" height="16" style="transform: rotate(180deg); margin-right: 5px;"><path d="M14.445 9h5.387s2.997.154 1.95 3.669c-.168.51-2.346 6.911-2.346 6.911s-.763 1.416-2.86 1.416H8.989c-1.498 0-2.005-.896-1.989-2v-7.998c0-.987.336-2.032 1.114-2.639 4.45-3.773 3.436-4.597 4.45-5.83.985-1.13 3.2-.5 3.037 2.362C15.201 7.397 14.445 9 14.445 9zM3 9h2a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V10a1 1 0 0 1 1-1z" fill-rule="evenodd"></path></svg></span>踩</button><button type="button" class="Button CommentItemV2-hoverBtn Button--plain"><span style="display: inline-flex; align-items: center;">​<svg class="Zi Zi--Report" fill="currentColor" viewBox="0 0 24 24" width="16" height="16" style="margin-right: 5px;"><path d="M19.947 3.129c-.633.136-3.927.639-5.697.385-3.133-.45-4.776-2.54-9.949-.888-.997.413-1.277 1.038-1.277 2.019L3 20.808c0 .3.101.54.304.718a.97.97 0 0 0 .73.304c.275 0 .519-.102.73-.304.202-.179.304-.418.304-.718v-6.58c4.533-1.235 8.047.668 8.562.864 2.343.893 5.542.008 6.774-.657.397-.178.596-.474.596-.887V3.964c0-.599-.42-.972-1.053-.835z" fill-rule="evenodd"></path></svg></span>举报</button></div></div></div></div></li></ul><ul class="NestComment"><li class="NestComment--rootCommentNoChild"><div class="CommentItemV2"><div><div class="CommentItemV2-meta"><span class="UserLink CommentItemV2-avatar"><div class="Popover"><div id="Popover15-toggle" aria-haspopup="true" aria-expanded="false" aria-owns="Popover15-content"><a class="UserLink-link" data-za-detail-view-element_name="User" target="_blank" href="https://www.zhihu.com/people/walker2016-84"><img class="Avatar UserLink-avatar" width="24" height="24" src="./深入浅出浏览器渲染原理 - 知乎_files/v2-a2ff70a3078097297b0183fa85297795_s.jpg" srcset="https://pic4.zhimg.com/v2-a2ff70a3078097297b0183fa85297795_xs.jpg 2x" alt="walker2016"></a></div></div></span><span class="UserLink"><a class="UserLink-link" data-za-detail-view-element_name="User" target="_blank" href="https://www.zhihu.com/people/walker2016-84">walker2016</a></span><span class="CommentItemV2-time">6 个月前</span></div><div class="CommentItemV2-metaSibling"><div class="CommentRichText CommentItemV2-content"><div class="RichText ztext">那请问html解析器和css解析器也是并行吗？我看他俩都是渲染引擎的进程</div></div><div class="CommentItemV2-footer"><button type="button" class="Button CommentItemV2-likeBtn Button--plain"><span style="display: inline-flex; align-items: center;">​<svg class="Zi Zi--Like" fill="currentColor" viewBox="0 0 24 24" width="16" height="16" style="margin-right: 5px;"><path d="M14.445 9h5.387s2.997.154 1.95 3.669c-.168.51-2.346 6.911-2.346 6.911s-.763 1.416-2.86 1.416H8.989c-1.498 0-2.005-.896-1.989-2v-7.998c0-.987.336-2.032 1.114-2.639 4.45-3.773 3.436-4.597 4.45-5.83.985-1.13 3.2-.5 3.037 2.362C15.201 7.397 14.445 9 14.445 9zM3 9h2a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V10a1 1 0 0 1 1-1z" fill-rule="evenodd"></path></svg></span>赞</button><button type="button" class="Button CommentItemV2-hoverBtn Button--plain"><span style="display: inline-flex; align-items: center;">​<svg class="Zi Zi--Reply" fill="currentColor" viewBox="0 0 24 24" width="16" height="16" style="margin-right: 5px;"><path d="M22.959 17.22c-1.686-3.552-5.128-8.062-11.636-8.65-.539-.053-1.376-.436-1.376-1.561V4.678c0-.521-.635-.915-1.116-.521L1.469 10.67a1.506 1.506 0 0 0-.1 2.08s6.99 6.818 7.443 7.114c.453.295 1.136.124 1.135-.501V17a1.525 1.525 0 0 1 1.532-1.466c1.186-.139 7.597-.077 10.33 2.396 0 0 .396.257.536.257.892 0 .614-.967.614-.967z" fill-rule="evenodd"></path></svg></span>回复</button><button type="button" class="Button CommentItemV2-hoverBtn Button--plain"><span style="display: inline-flex; align-items: center;">​<svg class="Zi Zi--Like" fill="currentColor" viewBox="0 0 24 24" width="16" height="16" style="transform: rotate(180deg); margin-right: 5px;"><path d="M14.445 9h5.387s2.997.154 1.95 3.669c-.168.51-2.346 6.911-2.346 6.911s-.763 1.416-2.86 1.416H8.989c-1.498 0-2.005-.896-1.989-2v-7.998c0-.987.336-2.032 1.114-2.639 4.45-3.773 3.436-4.597 4.45-5.83.985-1.13 3.2-.5 3.037 2.362C15.201 7.397 14.445 9 14.445 9zM3 9h2a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V10a1 1 0 0 1 1-1z" fill-rule="evenodd"></path></svg></span>踩</button><button type="button" class="Button CommentItemV2-hoverBtn Button--plain"><span style="display: inline-flex; align-items: center;">​<svg class="Zi Zi--Report" fill="currentColor" viewBox="0 0 24 24" width="16" height="16" style="margin-right: 5px;"><path d="M19.947 3.129c-.633.136-3.927.639-5.697.385-3.133-.45-4.776-2.54-9.949-.888-.997.413-1.277 1.038-1.277 2.019L3 20.808c0 .3.101.54.304.718a.97.97 0 0 0 .73.304c.275 0 .519-.102.73-.304.202-.179.304-.418.304-.718v-6.58c4.533-1.235 8.047.668 8.562.864 2.343.893 5.542.008 6.774-.657.397-.178.596-.474.596-.887V3.964c0-.599-.42-.972-1.053-.835z" fill-rule="evenodd"></path></svg></span>举报</button></div></div></div></div></li></ul></div></div></div></div></div></div></main><div class="CornerButtons"><div class="CornerAnimayedFlex"><button data-tooltip="建议反馈" data-tooltip-position="left" data-tooltip-will-hide-on-click="true" aria-label="建议反馈" type="button" class="Button CornerButton Button--plain"><svg class="Zi Zi--Feedback" title="建议反馈" fill="currentColor" viewBox="0 0 24 24" width="24" height="24"><path d="M19.99 6.99L18 5s-1-1-2-1H8C7 4 6 5 6 5L4 7S3 8 3 9v9s0 2 2.002 2H19c2 0 2-2 2-2V9c0-1-1.01-2.01-1.01-2.01zM16.5 5.5L19 8H5l2.5-2.5h9zm-2 5.5s.5 0 .5.5-.5.5-.5.5h-5s-.5 0-.5-.5.5-.5.5-.5h5z"></path></svg></button></div><div class="CornerAnimayedFlex CornerAnimayedFlex--hidden"><button data-tooltip="回到顶部" data-tooltip-position="left" data-tooltip-will-hide-on-click="true" aria-label="回到顶部" type="button" class="Button CornerButton Button--plain"><svg class="Zi Zi--BackToTop" title="回到顶部" fill="currentColor" viewBox="0 0 24 24" width="24" height="24"><path d="M16.036 19.59a1 1 0 0 1-.997.995H9.032a.996.996 0 0 1-.997-.996v-7.005H5.03c-1.1 0-1.36-.633-.578-1.416L11.33 4.29a1.003 1.003 0 0 1 1.412 0l6.878 6.88c.782.78.523 1.415-.58 1.415h-3.004v7.005z"></path></svg></button></div></div></div></div><script id="js-clientConfig" type="text/json">{"host":"zhihu.com","protocol":"https:","wwwHost":"www.zhihu.com","zhuanlanHost":"zhuanlan.zhihu.com","apiHost":"api.zhihu.com"}</script><script id="js-initialData" type="text/json">{"initialState":{"common":{"ask":{}},"loading":{"global":{"count":0},"local":{"env\u002FgetIpinfo\u002F":false,"article\u002Fget\u002F":false,"brand\u002FgetUrl\u002F":false}},"entities":{"users":{"610d434a9cafb703aee32ce98c73fc48":{"uid":788858935401648100,"userType":"people","id":"610d434a9cafb703aee32ce98c73fc48"},"fundebug":{"isFollowed":false,"avatarUrlTemplate":"https:\u002F\u002Fpic2.zhimg.com\u002Fv2-777d2d0550cca5b8de8059993dedf907_{size}.jpg","uid":"827879025467854848","userType":"people","isFollowing":false,"urlToken":"fundebug","id":"04328c265e70032f5f458ed3c7d79da7","description":"实时监控前端网页、微信小程序、微信小游戏、支付宝小程序、React Native、Node.js和Java应用BUG，第一时间报警，快速修复BUG!","name":"Fundebug","isAdvertiser":false,"headline":"一行代码搞定BUG监控：www.fundebug.com","gender":0,"url":"\u002Fpeople\u002F04328c265e70032f5f458ed3c7d79da7","avatarUrl":"https:\u002F\u002Fpic2.zhimg.com\u002Fv2-777d2d0550cca5b8de8059993dedf907_l.jpg","isOrg":false,"type":"people","badge":[],"exposedMedal":{"medalId":"972478580856496128","medalName":"专栏作家","avatarUrl":"https:\u002F\u002Fpic2.zhimg.com\u002Fv2-c6395b66f4bf91be3056666c4ae80867_r.png","miniAvatarUrl":"https:\u002F\u002Fpic2.zhimg.com\u002Fv2-2675240add1d7e06c796232ba0f0ba64_is.png","description":"开通专栏并收获 1000 关注"}}},"questions":{},"answers":{},"articles":{"53913989":{"trackUrl":["https:\u002F\u002Fsugar.zhihu.com\u002Fplutus_adreaper\u002Fpage_monitor_log?si=__SESSIONID__&ti=__ATOKEN__&at=view&pf=__OS__&ed=BiBUKF0xBSkqGGRUA2R5CFh2kitdCUfUS-0=&idfa=__IDFA__&imei=__IMEI__&androidid=__ANDROIDID__&oaid=__OAID__"],"id":53913989,"title":"深入浅出浏览器渲染原理","type":"article","excerptTitle":"","url":"https:\u002F\u002Fzhuanlan.zhihu.com\u002Fp\u002F53913989","imageUrl":"","titleImage":"","excerpt":"\u003Cimg src=\"https:\u002F\u002Fpic3.zhimg.com\u002Fv2-2f2b511b0434bc36d8fa50c707746a06_200x112.png\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1624\" data-rawheight=\"474\" data-watermark=\"watermark\" data-original-src=\"v2-2f2b511b0434bc36d8fa50c707746a06\" data-watermark-src=\"v2-5d8ee9d00bcc898318d1c9a8bf6684b7\" data-private-watermark-src=\"\" data-original=\"https:\u002F\u002Fpic3.zhimg.com\u002Fv2-2f2b511b0434bc36d8fa50c707746a06_r.png\" class=\"origin_image inline-img zh-lightbox-thumb\"\u002F\u003E\u003Ca href=\"https:\u002F\u002Flink.zhihu.com\u002F?target=https%3A\u002F\u002Fblog.fundebug.com\u002F2019\u002F01\u002F03\u002Funderstand-browser-rendering\u002F\" data-draft-node=\"block\" data-draft-type=\"link-card\" class=\" external\" target=\"_blank\" rel=\"nofollow noreferrer\"\u003E\u003Cspan class=\"invisible\"\u003Ehttps:\u002F\u002F\u003C\u002Fspan\u003E\u003Cspan class=\"visible\"\u003Eblog.fundebug.com\u002F2019\u002F\u003C\u002Fspan\u003E\u003Cspan class=\"invisible\"\u003E01\u002F03\u002Funderstand-browser-rendering\u002F\u003C\u002Fspan\u003E\u003Cspan class=\"ellipsis\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003E\u003Cb\u003E摘要：\u003C\u002Fb\u003E 理解浏览器渲染。前言浏览器的内核是指支持浏览器运行的最核心的程序，分为两个部分的，一是渲染引擎，另一个是JS引擎。渲染引擎在不同的浏览器中也不是都相同的。比如在 Firefox 中叫做 Gecko，在 Chrome 和 Safari 中都是基于…","created":1546481966,"updated":1546481966,"author":{"isFollowed":false,"avatarUrlTemplate":"https:\u002F\u002Fpic2.zhimg.com\u002Fv2-777d2d0550cca5b8de8059993dedf907_{size}.jpg","uid":"827879025467854848","userType":"people","isFollowing":false,"urlToken":"fundebug","id":"04328c265e70032f5f458ed3c7d79da7","description":"实时监控前端网页、微信小程序、微信小游戏、支付宝小程序、React Native、Node.js和Java应用BUG，第一时间报警，快速修复BUG!","name":"Fundebug","isAdvertiser":false,"headline":"一行代码搞定BUG监控：www.fundebug.com","gender":0,"url":"\u002Fpeople\u002F04328c265e70032f5f458ed3c7d79da7","avatarUrl":"https:\u002F\u002Fpic2.zhimg.com\u002Fv2-777d2d0550cca5b8de8059993dedf907_l.jpg","isOrg":false,"type":"people","badge":[],"exposedMedal":{"medalId":"972478580856496128","medalName":"专栏作家","avatarUrl":"https:\u002F\u002Fpic2.zhimg.com\u002Fv2-c6395b66f4bf91be3056666c4ae80867_r.png","miniAvatarUrl":"https:\u002F\u002Fpic2.zhimg.com\u002Fv2-2675240add1d7e06c796232ba0f0ba64_is.png","description":"开通专栏并收获 1000 关注"}},"commentPermission":"all","state":"published","imageWidth":0,"imageHeight":0,"content":"\u003Cp\u003E\u003C\u002Fp\u003E\u003Ca href=\"https:\u002F\u002Flink.zhihu.com\u002F?target=https%3A\u002F\u002Fblog.fundebug.com\u002F2019\u002F01\u002F03\u002Funderstand-browser-rendering\u002F\" data-draft-node=\"block\" data-draft-type=\"link-card\" class=\" external\" target=\"_blank\" rel=\"nofollow noreferrer\"\u003E\u003Cspan class=\"invisible\"\u003Ehttps:\u002F\u002F\u003C\u002Fspan\u003E\u003Cspan class=\"visible\"\u003Eblog.fundebug.com\u002F2019\u002F\u003C\u002Fspan\u003E\u003Cspan class=\"invisible\"\u003E01\u002F03\u002Funderstand-browser-rendering\u002F\u003C\u002Fspan\u003E\u003Cspan class=\"ellipsis\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003E\u003Cp\u003E\u003Cb\u003E摘要：\u003C\u002Fb\u003E 理解浏览器渲染。\u003C\u002Fp\u003E\u003Ch2\u003E前言\u003C\u002Fh2\u003E\u003Cp\u003E浏览器的内核是指支持浏览器运行的最核心的程序，分为两个部分的，一是渲染引擎，另一个是JS引擎。渲染引擎在不同的浏览器中也不是都相同的。比如在 Firefox 中叫做 Gecko，在 Chrome 和 Safari 中都是基于 WebKit 开发的。本文我们主要介绍关于 WebKit 的这部分渲染引擎内容以及几个相关的问题。\u003C\u002Fp\u003E\u003Cp\u003E\u003Cb\u003E如需获取思维导图请猛戳\u003Ca href=\"https:\u002F\u002Flink.zhihu.com\u002F?target=https%3A\u002F\u002Fgithub.com\u002Fljianshu\u002FBlog\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\"\u003EGitHub博客\u003C\u002Fa\u003E\u003C\u002Fb\u003E\u003C\u002Fp\u003E\u003Cp class=\"ztext-empty-paragraph\"\u003E\u003Cbr\u002F\u003E\u003C\u002Fp\u003E\u003Cfigure data-size=\"normal\"\u003E\u003Cnoscript\u003E\u003Cimg src=\"https:\u002F\u002Fpic4.zhimg.com\u002Fv2-5d8ee9d00bcc898318d1c9a8bf6684b7_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1624\" data-rawheight=\"474\" class=\"origin_image zh-lightbox-thumb\" width=\"1624\" data-original=\"https:\u002F\u002Fpic4.zhimg.com\u002Fv2-5d8ee9d00bcc898318d1c9a8bf6684b7_r.jpg\"\u002F\u003E\u003C\u002Fnoscript\u003E\u003Cimg src=\"data:image\u002Fsvg+xml;utf8,&lt;svg xmlns=&#39;http:\u002F\u002Fwww.w3.org\u002F2000\u002Fsvg&#39; width=&#39;1624&#39; height=&#39;474&#39;&gt;&lt;\u002Fsvg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1624\" data-rawheight=\"474\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"1624\" data-original=\"https:\u002F\u002Fpic4.zhimg.com\u002Fv2-5d8ee9d00bcc898318d1c9a8bf6684b7_r.jpg\" data-actualsrc=\"https:\u002F\u002Fpic4.zhimg.com\u002Fv2-5d8ee9d00bcc898318d1c9a8bf6684b7_b.jpg\"\u002F\u003E\u003C\u002Ffigure\u003E\u003Cp class=\"ztext-empty-paragraph\"\u003E\u003Cbr\u002F\u003E\u003C\u002Fp\u003E\u003Ch2\u003E浏览器工作大体流程\u003C\u002Fh2\u003E\u003Cp class=\"ztext-empty-paragraph\"\u003E\u003Cbr\u002F\u003E\u003C\u002Fp\u003E\u003Cfigure data-size=\"normal\"\u003E\u003Cnoscript\u003E\u003Cimg src=\"https:\u002F\u002Fpic1.zhimg.com\u002Fv2-555af7445d2f24d0bba9106b138ef934_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"705\" data-rawheight=\"227\" class=\"origin_image zh-lightbox-thumb\" width=\"705\" data-original=\"https:\u002F\u002Fpic1.zhimg.com\u002Fv2-555af7445d2f24d0bba9106b138ef934_r.jpg\"\u002F\u003E\u003C\u002Fnoscript\u003E\u003Cimg src=\"data:image\u002Fsvg+xml;utf8,&lt;svg xmlns=&#39;http:\u002F\u002Fwww.w3.org\u002F2000\u002Fsvg&#39; width=&#39;705&#39; height=&#39;227&#39;&gt;&lt;\u002Fsvg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"705\" data-rawheight=\"227\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"705\" data-original=\"https:\u002F\u002Fpic1.zhimg.com\u002Fv2-555af7445d2f24d0bba9106b138ef934_r.jpg\" data-actualsrc=\"https:\u002F\u002Fpic1.zhimg.com\u002Fv2-555af7445d2f24d0bba9106b138ef934_b.jpg\"\u002F\u003E\u003C\u002Ffigure\u003E\u003Cp class=\"ztext-empty-paragraph\"\u003E\u003Cbr\u002F\u003E\u003C\u002Fp\u003E\u003Cp\u003E浏览器工作流程大体分为如下三部分：\u003C\u002Fp\u003E\u003Ch2\u003E1）浏览器会解析三个东西：\u003C\u002Fh2\u003E\u003Cul\u003E\u003Cli\u003E一个是HTML\u002FSVG\u002FXHTML，事实上，Webkit有三个C++的类对应这三类文档。解析这三种文件会产生一个DOM Tree。\u003C\u002Fli\u003E\u003Cli\u003ECSS，解析CSS会产生CSS规则树。\u003C\u002Fli\u003E\u003Cli\u003EJavascript，脚本，主要是通过DOM API和CSSOM API来操作DOM Tree和CSS Rule Tree.\u003C\u002Fli\u003E\u003C\u002Ful\u003E\u003Ch2\u003E2）解析完成后，浏览器引擎会通过DOM Tree 和 CSS Rule Tree 来构造 Rendering Tree。\u003C\u002Fh2\u003E\u003Cul\u003E\u003Cli\u003ERendering Tree 渲染树并不等同于DOM树，因为一些像Header或display:none的东西就没必要放在渲染树中了。\u003C\u002Fli\u003E\u003Cli\u003ECSS 的 Rule Tree主要是为了完成匹配并把CSS Rule附加上Rendering Tree上的每个Element。也就是DOM结点。也就是所谓的Frame。\u003C\u002Fli\u003E\u003Cli\u003E然后，计算每个Frame（也就是每个Element）的位置，这又叫layout和reflow过程。\u003C\u002Fli\u003E\u003C\u002Ful\u003E\u003Ch2\u003E3）最后通过调用操作系统Native GUI的API绘制。\u003C\u002Fh2\u003E\u003Cblockquote\u003E\u003Ci\u003E接下来我们针对这其中所经历的重要步骤，一一详细阐述。\u003C\u002Fi\u003E\u003C\u002Fblockquote\u003E\u003Ch2\u003E构建DOM\u003C\u002Fh2\u003E\u003Cp\u003E浏览器会遵守一套步骤将HTML 文件转换为 DOM 树。宏观上，可以分为几个步骤：\u003C\u002Fp\u003E\u003Cp class=\"ztext-empty-paragraph\"\u003E\u003Cbr\u002F\u003E\u003C\u002Fp\u003E\u003Cfigure data-size=\"normal\"\u003E\u003Cnoscript\u003E\u003Cimg src=\"https:\u002F\u002Fpic2.zhimg.com\u002Fv2-e66906563b9a196c00cb8811236bc941_b.png\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"623\" data-rawheight=\"88\" class=\"origin_image zh-lightbox-thumb\" width=\"623\" data-original=\"https:\u002F\u002Fpic2.zhimg.com\u002Fv2-e66906563b9a196c00cb8811236bc941_r.jpg\"\u002F\u003E\u003C\u002Fnoscript\u003E\u003Cimg src=\"data:image\u002Fsvg+xml;utf8,&lt;svg xmlns=&#39;http:\u002F\u002Fwww.w3.org\u002F2000\u002Fsvg&#39; width=&#39;623&#39; height=&#39;88&#39;&gt;&lt;\u002Fsvg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"623\" data-rawheight=\"88\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"623\" data-original=\"https:\u002F\u002Fpic2.zhimg.com\u002Fv2-e66906563b9a196c00cb8811236bc941_r.jpg\" data-actualsrc=\"https:\u002F\u002Fpic2.zhimg.com\u002Fv2-e66906563b9a196c00cb8811236bc941_b.png\"\u002F\u003E\u003C\u002Ffigure\u003E\u003Cp class=\"ztext-empty-paragraph\"\u003E\u003Cbr\u002F\u003E\u003C\u002Fp\u003E\u003Cul\u003E\u003Cli\u003E浏览器从磁盘或网络读取HTML的原始字节，并根据文件的指定编码（例如 UTF-8）将它们转换成字符串。\u003C\u002Fli\u003E\u003C\u002Ful\u003E\u003Cp\u003E在网络中传输的内容其实都是 0 和 1 这些字节数据。当浏览器接收到这些字节数据以后，它会将这些字节数据转换为字符串，也就是我们写的代码。\u003C\u002Fp\u003E\u003Cul\u003E\u003Cli\u003E将字符串转换成Token，例如：\u003Ccode\u003E&lt;html&gt;\u003C\u002Fcode\u003E、\u003Ccode\u003E&lt;body&gt;\u003C\u002Fcode\u003E等。\u003Cb\u003EToken中会标识出当前Token是“开始标签”或是“结束标签”亦或是“文本”等信息\u003C\u002Fb\u003E。\u003C\u002Fli\u003E\u003C\u002Ful\u003E\u003Cp\u003E这时候你一定会有疑问，节点与节点之间的关系如何维护？\u003C\u002Fp\u003E\u003Cp\u003E事实上，这就是Token要标识“起始标签”和“结束标签”等标识的作用。例如“title”Token的起始标签和结束标签之间的节点肯定是属于“head”的子节点。\u003C\u002Fp\u003E\u003Cp class=\"ztext-empty-paragraph\"\u003E\u003Cbr\u002F\u003E\u003C\u002Fp\u003E\u003Cfigure data-size=\"normal\"\u003E\u003Cnoscript\u003E\u003Cimg src=\"https:\u002F\u002Fpic2.zhimg.com\u002Fv2-f0ae41af7647a86873f0299c9aea31d5_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"671\" data-rawheight=\"168\" class=\"origin_image zh-lightbox-thumb\" width=\"671\" data-original=\"https:\u002F\u002Fpic2.zhimg.com\u002Fv2-f0ae41af7647a86873f0299c9aea31d5_r.jpg\"\u002F\u003E\u003C\u002Fnoscript\u003E\u003Cimg src=\"data:image\u002Fsvg+xml;utf8,&lt;svg xmlns=&#39;http:\u002F\u002Fwww.w3.org\u002F2000\u002Fsvg&#39; width=&#39;671&#39; height=&#39;168&#39;&gt;&lt;\u002Fsvg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"671\" data-rawheight=\"168\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"671\" data-original=\"https:\u002F\u002Fpic2.zhimg.com\u002Fv2-f0ae41af7647a86873f0299c9aea31d5_r.jpg\" data-actualsrc=\"https:\u002F\u002Fpic2.zhimg.com\u002Fv2-f0ae41af7647a86873f0299c9aea31d5_b.jpg\"\u002F\u003E\u003C\u002Ffigure\u003E\u003Cp class=\"ztext-empty-paragraph\"\u003E\u003Cbr\u002F\u003E\u003C\u002Fp\u003E\u003Cp\u003E上图给出了节点之间的关系，例如：“Hello”Token位于“title”开始标签与“title”结束标签之间，表明“Hello”Token是“title”Token的子节点。同理“title”Token是“head”Token的子节点。\u003C\u002Fp\u003E\u003Cul\u003E\u003Cli\u003E生成节点对象并构建DOM\u003C\u002Fli\u003E\u003C\u002Ful\u003E\u003Cp\u003E事实上，构建DOM的过程中，不是等所有Token都转换完成后再去生成节点对象，而是一边生成Token一边消耗Token来生成节点对象。换句话说，每个Token被生成后，会立刻消耗这个Token创建出节点对象。\u003Cb\u003E注意：带有结束标签标识的Token不会创建节点对象。\u003C\u002Fb\u003E\u003C\u002Fp\u003E\u003Cp\u003E接下来我们举个例子，假设有段HTML文本：\u003C\u002Fp\u003E\u003Cdiv class=\"highlight\"\u003E\u003Cpre\u003E\u003Ccode class=\"language-html\"\u003E\u003Cspan class=\"p\"\u003E&lt;\u003C\u002Fspan\u003E\u003Cspan class=\"nt\"\u003Ehtml\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E&gt;\u003C\u002Fspan\u003E\n\u003Cspan class=\"p\"\u003E&lt;\u003C\u002Fspan\u003E\u003Cspan class=\"nt\"\u003Ehead\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E&gt;\u003C\u002Fspan\u003E\n    \u003Cspan class=\"p\"\u003E&lt;\u003C\u002Fspan\u003E\u003Cspan class=\"nt\"\u003Etitle\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E&gt;\u003C\u002Fspan\u003EWeb page parsing\u003Cspan class=\"p\"\u003E&lt;\u002F\u003C\u002Fspan\u003E\u003Cspan class=\"nt\"\u003Etitle\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E&gt;\u003C\u002Fspan\u003E\n\u003Cspan class=\"p\"\u003E&lt;\u002F\u003C\u002Fspan\u003E\u003Cspan class=\"nt\"\u003Ehead\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E&gt;\u003C\u002Fspan\u003E\n\u003Cspan class=\"p\"\u003E&lt;\u003C\u002Fspan\u003E\u003Cspan class=\"nt\"\u003Ebody\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E&gt;\u003C\u002Fspan\u003E\n    \u003Cspan class=\"p\"\u003E&lt;\u003C\u002Fspan\u003E\u003Cspan class=\"nt\"\u003Ediv\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E&gt;\u003C\u002Fspan\u003E\n        \u003Cspan class=\"p\"\u003E&lt;\u003C\u002Fspan\u003E\u003Cspan class=\"nt\"\u003Eh1\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E&gt;\u003C\u002Fspan\u003EWeb page parsing\u003Cspan class=\"p\"\u003E&lt;\u002F\u003C\u002Fspan\u003E\u003Cspan class=\"nt\"\u003Eh1\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E&gt;\u003C\u002Fspan\u003E\n        \u003Cspan class=\"p\"\u003E&lt;\u003C\u002Fspan\u003E\u003Cspan class=\"nt\"\u003Ep\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E&gt;\u003C\u002Fspan\u003EThis is an example Web page.\u003Cspan class=\"p\"\u003E&lt;\u002F\u003C\u002Fspan\u003E\u003Cspan class=\"nt\"\u003Ep\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E&gt;\u003C\u002Fspan\u003E\n    \u003Cspan class=\"p\"\u003E&lt;\u002F\u003C\u002Fspan\u003E\u003Cspan class=\"nt\"\u003Ediv\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E&gt;\u003C\u002Fspan\u003E\n\u003Cspan class=\"p\"\u003E&lt;\u002F\u003C\u002Fspan\u003E\u003Cspan class=\"nt\"\u003Ebody\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E&gt;\u003C\u002Fspan\u003E\n\u003Cspan class=\"p\"\u003E&lt;\u002F\u003C\u002Fspan\u003E\u003Cspan class=\"nt\"\u003Ehtml\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E&gt;\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003C\u002Fdiv\u003E\u003Cp\u003E上面这段HTML会解析成这样：\u003C\u002Fp\u003E\u003Cp class=\"ztext-empty-paragraph\"\u003E\u003Cbr\u002F\u003E\u003C\u002Fp\u003E\u003Cfigure data-size=\"normal\"\u003E\u003Cnoscript\u003E\u003Cimg src=\"https:\u002F\u002Fpic3.zhimg.com\u002Fv2-264b6ef49bdc36ebbd5180a4787af696_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"468\" data-rawheight=\"308\" class=\"origin_image zh-lightbox-thumb\" width=\"468\" data-original=\"https:\u002F\u002Fpic3.zhimg.com\u002Fv2-264b6ef49bdc36ebbd5180a4787af696_r.jpg\"\u002F\u003E\u003C\u002Fnoscript\u003E\u003Cimg src=\"data:image\u002Fsvg+xml;utf8,&lt;svg xmlns=&#39;http:\u002F\u002Fwww.w3.org\u002F2000\u002Fsvg&#39; width=&#39;468&#39; height=&#39;308&#39;&gt;&lt;\u002Fsvg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"468\" data-rawheight=\"308\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"468\" data-original=\"https:\u002F\u002Fpic3.zhimg.com\u002Fv2-264b6ef49bdc36ebbd5180a4787af696_r.jpg\" data-actualsrc=\"https:\u002F\u002Fpic3.zhimg.com\u002Fv2-264b6ef49bdc36ebbd5180a4787af696_b.jpg\"\u002F\u003E\u003C\u002Ffigure\u003E\u003Cp class=\"ztext-empty-paragraph\"\u003E\u003Cbr\u002F\u003E\u003C\u002Fp\u003E\u003Ch2\u003E构建CSSOM\u003C\u002Fh2\u003E\u003Cp\u003EDOM会捕获页面的内容，但浏览器还需要知道页面如何展示，所以需要构建CSSOM。\u003C\u002Fp\u003E\u003Cp\u003E构建CSSOM的过程与构建DOM的过程非常相似，当浏览器接收到一段CSS，浏览器首先要做的是识别出Token，然后构建节点并生成CSSOM。\u003C\u002Fp\u003E\u003Cp\u003E在这一过程中，浏览器会确定下每一个节点的样式到底是什么，并且这一过程其实是很消耗资源的。因为样式你可以自行设置给某个节点，也可以通过继承获得。在这一过程中，浏览器得递归 CSSOM 树，然后确定具体的元素到底是什么样式。\u003C\u002Fp\u003E\u003Cp\u003E\u003Cb\u003E注意：CSS匹配HTML元素是一个相当复杂和有性能问题的事情。所以，DOM树要小，CSS尽量用id和class，千万不要过渡层叠下去\u003C\u002Fb\u003E。\u003C\u002Fp\u003E\u003Ch2\u003E构建渲染树\u003C\u002Fh2\u003E\u003Cp\u003E当我们生成 DOM 树和 CSSOM 树以后，就需要将这两棵树组合为渲染树。\u003C\u002Fp\u003E\u003Cp class=\"ztext-empty-paragraph\"\u003E\u003Cbr\u002F\u003E\u003C\u002Fp\u003E\u003Cfigure data-size=\"normal\"\u003E\u003Cnoscript\u003E\u003Cimg src=\"https:\u002F\u002Fpic2.zhimg.com\u002Fv2-71eb942f1ed509feaebcaed851ae819d_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"689\" data-rawheight=\"327\" class=\"origin_image zh-lightbox-thumb\" width=\"689\" data-original=\"https:\u002F\u002Fpic2.zhimg.com\u002Fv2-71eb942f1ed509feaebcaed851ae819d_r.jpg\"\u002F\u003E\u003C\u002Fnoscript\u003E\u003Cimg src=\"data:image\u002Fsvg+xml;utf8,&lt;svg xmlns=&#39;http:\u002F\u002Fwww.w3.org\u002F2000\u002Fsvg&#39; width=&#39;689&#39; height=&#39;327&#39;&gt;&lt;\u002Fsvg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"689\" data-rawheight=\"327\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"689\" data-original=\"https:\u002F\u002Fpic2.zhimg.com\u002Fv2-71eb942f1ed509feaebcaed851ae819d_r.jpg\" data-actualsrc=\"https:\u002F\u002Fpic2.zhimg.com\u002Fv2-71eb942f1ed509feaebcaed851ae819d_b.jpg\"\u002F\u003E\u003C\u002Ffigure\u003E\u003Cp class=\"ztext-empty-paragraph\"\u003E\u003Cbr\u002F\u003E\u003C\u002Fp\u003E\u003Cp\u003E在这一过程中，不是简单的将两者合并就行了。\u003Cb\u003E渲染树只会包括需要显示的节点和这些节点的样式信息\u003C\u002Fb\u003E，如果某个节点是 \u003Ccode\u003Edisplay: none\u003C\u002Fcode\u003E的，那么就不会在渲染树中显示。\u003C\u002Fp\u003E\u003Ch2\u003E布局与绘制\u003C\u002Fh2\u003E\u003Cp\u003E当浏览器生成渲染树以后，就会根据渲染树来进行布局（也可以叫做回流）。这一阶段浏览器要做的事情是要弄清楚各个节点在页面中的确切位置和大小。通常这一行为也被称为“自动重排”。\u003C\u002Fp\u003E\u003Cp\u003E布局流程的输出是一个“盒模型”，它会精确地捕获每个元素在视口内的确切位置和尺寸，所有相对测量值都将转换为屏幕上的绝对像素。\u003C\u002Fp\u003E\u003Cp\u003E布局完成后，浏览器会立即发出“Paint Setup”和“Paint”事件，将渲染树转换成屏幕上的像素。\u003C\u002Fp\u003E\u003Cblockquote\u003E\u003Ci\u003E以上我们详细介绍了浏览器工作流程中的重要步骤，接下来我们讨论几个相关的问题：\u003C\u002Fi\u003E\u003C\u002Fblockquote\u003E\u003Ch2\u003E问题一：渲染过程中遇到JS文件怎么处理？\u003C\u002Fh2\u003E\u003Cp\u003EJavaScript的加载、解析与执行会阻塞DOM的构建，也就是说，在构建DOM时，HTML解析器若遇到了JavaScript，那么它会暂停构建DOM，将控制权移交给JavaScript引擎，等JavaScript引擎运行完毕，浏览器再从中断的地方恢复DOM构建。\u003C\u002Fp\u003E\u003Cp\u003E也就是说，如果你想首屏渲染的越快，就越不应该在首屏就加载 JS 文件，这也是都建议将 script 标签放在 body 标签底部的原因。当然在当下，并不是说 script 标签必须放在底部，因为你可以给 script 标签添加 defer 或者 async 属性（下文会介绍这两者的区别）。\u003C\u002Fp\u003E\u003Cp\u003EJS文件不只是阻塞DOM的构建，它会导致CSSOM也阻塞DOM的构建。\u003C\u002Fp\u003E\u003Cp\u003E原本DOM和CSSOM的构建是互不影响，井水不犯河水，但是一旦引入了JavaScript，CSSOM也开始阻塞DOM的构建，只有CSSOM构建完毕后，DOM再恢复DOM构建。\u003C\u002Fp\u003E\u003Cp\u003E这是什么情况？\u003C\u002Fp\u003E\u003Cp\u003E这是因为JavaScript不只是可以改DOM，它还可以更改样式，也就是它可以更改CSSOM。前面我们介绍，不完整的CSSOM是无法使用的，但JavaScript中想访问CSSOM并更改它，那么在执行JavaScript时，必须要能拿到完整的CSSOM。所以就导致了一个现象，如果浏览器尚未完成CSSOM的下载和构建，而我们却想在此时运行脚本，那么浏览器将延迟脚本执行和DOM构建，直至其完成CSSOM的下载和构建。也就是说，\u003Cb\u003E在这种情况下，浏览器会先下载和构建CSSOM，然后再执行JavaScript，最后在继续构建DOM\u003C\u002Fb\u003E。\u003C\u002Fp\u003E\u003Ch2\u003E问题二：你真的了解回流和重绘吗\u003C\u002Fh2\u003E\u003Cp class=\"ztext-empty-paragraph\"\u003E\u003Cbr\u002F\u003E\u003C\u002Fp\u003E\u003Cfigure data-size=\"normal\"\u003E\u003Cnoscript\u003E\u003Cimg src=\"https:\u002F\u002Fpic4.zhimg.com\u002Fv2-7857be6c43e653cca01bfebe64a8e5e7_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"580\" data-rawheight=\"265\" class=\"origin_image zh-lightbox-thumb\" width=\"580\" data-original=\"https:\u002F\u002Fpic4.zhimg.com\u002Fv2-7857be6c43e653cca01bfebe64a8e5e7_r.jpg\"\u002F\u003E\u003C\u002Fnoscript\u003E\u003Cimg src=\"data:image\u002Fsvg+xml;utf8,&lt;svg xmlns=&#39;http:\u002F\u002Fwww.w3.org\u002F2000\u002Fsvg&#39; width=&#39;580&#39; height=&#39;265&#39;&gt;&lt;\u002Fsvg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"580\" data-rawheight=\"265\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"580\" data-original=\"https:\u002F\u002Fpic4.zhimg.com\u002Fv2-7857be6c43e653cca01bfebe64a8e5e7_r.jpg\" data-actualsrc=\"https:\u002F\u002Fpic4.zhimg.com\u002Fv2-7857be6c43e653cca01bfebe64a8e5e7_b.jpg\"\u002F\u003E\u003C\u002Ffigure\u003E\u003Cp class=\"ztext-empty-paragraph\"\u003E\u003Cbr\u002F\u003E\u003C\u002Fp\u003E\u003Cp\u003E我们知道，当网页生成的时候，至少会渲染一次。在用户访问的过程中，还会不断重新渲染。重新渲染会重复上图中的第四步(回流)+第五步(重绘)或者只有第五个步(重绘)。\u003C\u002Fp\u003E\u003Cul\u003E\u003Cli\u003E重绘:当render tree中的一些元素需要更新属性，而这些属性只是影响元素的外观、风格，而不会影响布局的，比如background-color。\u003C\u002Fli\u003E\u003Cli\u003E回流:当render tree中的一部分(或全部)因为元素的规模尺寸、布局、隐藏等改变而需要重新构建\u003C\u002Fli\u003E\u003C\u002Ful\u003E\u003Cp\u003E\u003Cb\u003E回流必定会发生重绘，重绘不一定会引发回流\u003C\u002Fb\u003E。重绘和回流会在我们设置节点样式时频繁出现，同时也会很大程度上影响性能。回流所需的成本比重绘高的多，改变父节点里的子节点很可能会导致父节点的一系列回流。\u003C\u002Fp\u003E\u003Ch2\u003E1）常见引起回流属性和方法\u003C\u002Fh2\u003E\u003Cp\u003E任何会改变元素几何信息(元素的位置和尺寸大小)的操作，都会触发回流，\u003C\u002Fp\u003E\u003Cul\u003E\u003Cli\u003E添加或者删除可见的DOM元素；\u003C\u002Fli\u003E\u003Cli\u003E元素尺寸改变——边距、填充、边框、宽度和高度\u003C\u002Fli\u003E\u003Cli\u003E内容变化，比如用户在input框中输入文字\u003C\u002Fli\u003E\u003Cli\u003E浏览器窗口尺寸改变——resize事件发生时\u003C\u002Fli\u003E\u003Cli\u003E计算 offsetWidth 和 offsetHeight 属性\u003C\u002Fli\u003E\u003Cli\u003E设置 style 属性的值\u003C\u002Fli\u003E\u003C\u002Ful\u003E\u003Cp class=\"ztext-empty-paragraph\"\u003E\u003Cbr\u002F\u003E\u003C\u002Fp\u003E\u003Cfigure data-size=\"normal\"\u003E\u003Cnoscript\u003E\u003Cimg src=\"https:\u002F\u002Fpic1.zhimg.com\u002Fv2-2f40649613c8a395aba42239edfde3fc_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"585\" data-rawheight=\"409\" class=\"origin_image zh-lightbox-thumb\" width=\"585\" data-original=\"https:\u002F\u002Fpic1.zhimg.com\u002Fv2-2f40649613c8a395aba42239edfde3fc_r.jpg\"\u002F\u003E\u003C\u002Fnoscript\u003E\u003Cimg src=\"data:image\u002Fsvg+xml;utf8,&lt;svg xmlns=&#39;http:\u002F\u002Fwww.w3.org\u002F2000\u002Fsvg&#39; width=&#39;585&#39; height=&#39;409&#39;&gt;&lt;\u002Fsvg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"585\" data-rawheight=\"409\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"585\" data-original=\"https:\u002F\u002Fpic1.zhimg.com\u002Fv2-2f40649613c8a395aba42239edfde3fc_r.jpg\" data-actualsrc=\"https:\u002F\u002Fpic1.zhimg.com\u002Fv2-2f40649613c8a395aba42239edfde3fc_b.jpg\"\u002F\u003E\u003C\u002Ffigure\u003E\u003Cp class=\"ztext-empty-paragraph\"\u003E\u003Cbr\u002F\u003E\u003C\u002Fp\u003E\u003Ch2\u003E2）常见引起重绘属性和方法\u003C\u002Fh2\u003E\u003Cp class=\"ztext-empty-paragraph\"\u003E\u003Cbr\u002F\u003E\u003C\u002Fp\u003E\u003Cfigure data-size=\"normal\"\u003E\u003Cnoscript\u003E\u003Cimg src=\"https:\u002F\u002Fpic4.zhimg.com\u002Fv2-be336593a1da8b4f65858af8aa2d761f_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"554\" data-rawheight=\"235\" class=\"origin_image zh-lightbox-thumb\" width=\"554\" data-original=\"https:\u002F\u002Fpic4.zhimg.com\u002Fv2-be336593a1da8b4f65858af8aa2d761f_r.jpg\"\u002F\u003E\u003C\u002Fnoscript\u003E\u003Cimg src=\"data:image\u002Fsvg+xml;utf8,&lt;svg xmlns=&#39;http:\u002F\u002Fwww.w3.org\u002F2000\u002Fsvg&#39; width=&#39;554&#39; height=&#39;235&#39;&gt;&lt;\u002Fsvg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"554\" data-rawheight=\"235\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"554\" data-original=\"https:\u002F\u002Fpic4.zhimg.com\u002Fv2-be336593a1da8b4f65858af8aa2d761f_r.jpg\" data-actualsrc=\"https:\u002F\u002Fpic4.zhimg.com\u002Fv2-be336593a1da8b4f65858af8aa2d761f_b.jpg\"\u002F\u003E\u003C\u002Ffigure\u003E\u003Cp class=\"ztext-empty-paragraph\"\u003E\u003Cbr\u002F\u003E\u003C\u002Fp\u003E\u003Cp\u003E下面例子中，触发了几次回流和重绘？\u003C\u002Fp\u003E\u003Cdiv class=\"highlight\"\u003E\u003Cpre\u003E\u003Ccode class=\"language-js\"\u003E\u003Cspan class=\"kd\"\u003Evar\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003Es\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"nb\"\u003Edocument\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Ebody\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Estyle\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"nx\"\u003Es\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Epadding\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"s2\"\u003E&#34;2px&#34;\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E;\u003C\u002Fspan\u003E \u003Cspan class=\"c1\"\u003E\u002F\u002F 回流+重绘\n\u003C\u002Fspan\u003E\u003Cspan class=\"c1\"\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Es\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Eborder\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"s2\"\u003E&#34;1px solid red&#34;\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E;\u003C\u002Fspan\u003E \u003Cspan class=\"c1\"\u003E\u002F\u002F 再一次 回流+重绘\n\u003C\u002Fspan\u003E\u003Cspan class=\"c1\"\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Es\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Ecolor\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"s2\"\u003E&#34;blue&#34;\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E;\u003C\u002Fspan\u003E \u003Cspan class=\"c1\"\u003E\u002F\u002F 再一次重绘\n\u003C\u002Fspan\u003E\u003Cspan class=\"c1\"\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Es\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003EbackgroundColor\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"s2\"\u003E&#34;#ccc&#34;\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E;\u003C\u002Fspan\u003E \u003Cspan class=\"c1\"\u003E\u002F\u002F 再一次 重绘\n\u003C\u002Fspan\u003E\u003Cspan class=\"c1\"\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Es\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003EfontSize\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"s2\"\u003E&#34;14px&#34;\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E;\u003C\u002Fspan\u003E \u003Cspan class=\"c1\"\u003E\u002F\u002F 再一次 回流+重绘\n\u003C\u002Fspan\u003E\u003Cspan class=\"c1\"\u003E\u002F\u002F 添加node，再一次 回流+重绘\n\u003C\u002Fspan\u003E\u003Cspan class=\"c1\"\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"nb\"\u003Edocument\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Ebody\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003EappendChild\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"nb\"\u003Edocument\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003EcreateTextNode\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"s1\"\u003E&#39;abc!&#39;\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E));\u003C\u002Fspan\u003E\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003C\u002Fdiv\u003E\u003Ch2\u003E3）如何减少回流、重绘\u003C\u002Fh2\u003E\u003Cul\u003E\u003Cli\u003E使用 transform 替代 top\u003C\u002Fli\u003E\u003Cli\u003E使用 visibility 替换 display: none ，因为前者只会引起重绘，后者会引发回流（改变了布局）\u003C\u002Fli\u003E\u003Cli\u003E不要把节点的属性值放在一个循环里当成循环里的变量。\u003C\u002Fli\u003E\u003C\u002Ful\u003E\u003Cdiv class=\"highlight\"\u003E\u003Cpre\u003E\u003Ccode class=\"language-js\"\u003E\u003Cspan class=\"k\"\u003Efor\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"kd\"\u003Elet\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003Ei\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"mi\"\u003E0\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E;\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003Ei\u003C\u002Fspan\u003E \u003Cspan class=\"o\"\u003E&lt;\u003C\u002Fspan\u003E \u003Cspan class=\"mi\"\u003E1000\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E;\u003C\u002Fspan\u003E \u003Cspan class=\"nx\"\u003Ei\u003C\u002Fspan\u003E\u003Cspan class=\"o\"\u003E++\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"p\"\u003E{\u003C\u002Fspan\u003E\n    \u003Cspan class=\"c1\"\u003E\u002F\u002F 获取 offsetTop 会导致回流，因为需要去获取正确的值\n\u003C\u002Fspan\u003E\u003Cspan class=\"c1\"\u003E\u003C\u002Fspan\u003E    \u003Cspan class=\"nx\"\u003Econsole\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Elog\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"nb\"\u003Edocument\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003EquerySelector\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"s1\"\u003E&#39;.test&#39;\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E).\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003Estyle\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"nx\"\u003EoffsetTop\u003C\u002Fspan\u003E\u003Cspan class=\"p\"\u003E)\u003C\u002Fspan\u003E\n\u003Cspan class=\"p\"\u003E}\u003C\u002Fspan\u003E\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003C\u002Fdiv\u003E\u003Cul\u003E\u003Cli\u003E不要使用 table 布局，可能很小的一个小改动会造成整个 table 的重新布局\u003C\u002Fli\u003E\u003Cli\u003E动画实现的速度的选择，动画速度越快，回流次数越多，也可以选择使用 requestAnimationFrame\u003C\u002Fli\u003E\u003Cli\u003ECSS 选择符从右往左匹配查找，避免节点层级过多\u003C\u002Fli\u003E\u003Cli\u003E将频繁重绘或者回流的节点设置为图层，图层能够阻止该节点的渲染行为影响别的节点。比如对于 video 标签来说，浏览器会自动将该节点变为图层。\u003C\u002Fli\u003E\u003C\u002Ful\u003E\u003Ch2\u003E问题三：async和defer的作用是什么？有什么区别?\u003C\u002Fh2\u003E\u003Cp\u003E接下来我们对比下 defer 和 async 属性的区别：\u003C\u002Fp\u003E\u003Cp class=\"ztext-empty-paragraph\"\u003E\u003Cbr\u002F\u003E\u003C\u002Fp\u003E\u003Cfigure data-size=\"normal\"\u003E\u003Cnoscript\u003E\u003Cimg src=\"https:\u002F\u002Fpic4.zhimg.com\u002Fv2-909c198b7ef020ad8529cfa97f4ffd6f_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"689\" data-rawheight=\"112\" class=\"origin_image zh-lightbox-thumb\" width=\"689\" data-original=\"https:\u002F\u002Fpic4.zhimg.com\u002Fv2-909c198b7ef020ad8529cfa97f4ffd6f_r.jpg\"\u002F\u003E\u003C\u002Fnoscript\u003E\u003Cimg src=\"data:image\u002Fsvg+xml;utf8,&lt;svg xmlns=&#39;http:\u002F\u002Fwww.w3.org\u002F2000\u002Fsvg&#39; width=&#39;689&#39; height=&#39;112&#39;&gt;&lt;\u002Fsvg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"689\" data-rawheight=\"112\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"689\" data-original=\"https:\u002F\u002Fpic4.zhimg.com\u002Fv2-909c198b7ef020ad8529cfa97f4ffd6f_r.jpg\" data-actualsrc=\"https:\u002F\u002Fpic4.zhimg.com\u002Fv2-909c198b7ef020ad8529cfa97f4ffd6f_b.jpg\"\u002F\u003E\u003C\u002Ffigure\u003E\u003Cp class=\"ztext-empty-paragraph\"\u003E\u003Cbr\u002F\u003E\u003C\u002Fp\u003E\u003Cp\u003E其中蓝色线代表JavaScript加载；红色线代表JavaScript执行；绿色线代表 HTML 解析。\u003C\u002Fp\u003E\u003Ch2\u003E1）情况1\u003Ccode\u003E&lt;script src=&#34;script.js&#34;&gt;&lt;\u002Fscript&gt;\u003C\u002Fcode\u003E\u003C\u002Fh2\u003E\u003Cp\u003E没有 defer 或 async，浏览器会立即加载并执行指定的脚本，也就是说不等待后续载入的文档元素，读到就加载并执行。\u003C\u002Fp\u003E\u003Ch2\u003E2）情况2\u003Ccode\u003E&lt;script async src=&#34;script.js&#34;&gt;&lt;\u002Fscript&gt;\u003C\u002Fcode\u003E (\u003Cb\u003E异步下载\u003C\u002Fb\u003E)\u003C\u002Fh2\u003E\u003Cp\u003Easync 属性表示异步执行引入的 JavaScript，与 defer 的区别在于，如果已经加载好，就会开始执行——无论此刻是 HTML 解析阶段还是 DOMContentLoaded 触发之后。需要注意的是，这种方式加载的 JavaScript 依然会阻塞 load 事件。换句话说，async-script 可能在 DOMContentLoaded 触发之前或之后执行，但一定在 load 触发之前执行。\u003C\u002Fp\u003E\u003Ch2\u003E3）情况3 \u003Ccode\u003E&lt;script defer src=&#34;script.js&#34;&gt;&lt;\u002Fscript&gt;\u003C\u002Fcode\u003E(\u003Cb\u003E延迟执行\u003C\u002Fb\u003E)\u003C\u002Fh2\u003E\u003Cp\u003Edefer 属性表示延迟执行引入的 JavaScript，即这段 JavaScript 加载时 HTML 并未停止解析，这两个过程是并行的。整个 document 解析完毕且 defer-script 也加载完成之后（这两件事情的顺序无关），会执行所有由 defer-script 加载的 JavaScript 代码，然后触发 DOMContentLoaded 事件。\u003C\u002Fp\u003E\u003Cp\u003Edefer 与相比普通 script，有两点区别：**载入 JavaScript 文件时不阻塞 HTML 的解析，执行阶段被放到 HTML 标签解析完成之后。\u003C\u002Fp\u003E\u003Cp\u003E在加载多个JS脚本的时候，async是无顺序的加载，而defer是有顺序的加载。**\u003C\u002Fp\u003E\u003Ch2\u003E问题四：为什么操作 DOM 慢\u003C\u002Fh2\u003E\u003Cp\u003E因为 DOM 是属于渲染引擎中的东西，而 JS 又是 JS 引擎中的东西。当我们通过 JS 操作 DOM 的时候，其实这个操作涉及到了两个线程之间的通信，那么势必会带来一些性能上的损耗。操作 DOM 次数一多，也就等同于一直在进行线程之间的通信，并且操作 DOM 可能还会带来重绘回流的情况，所以也就导致了性能上的问题。\u003C\u002Fp\u003E\u003Ch2\u003E问题五：渲染页面时常见哪些不良现象？\u003C\u002Fh2\u003E\u003Cp\u003E\u003Cb\u003E由于浏览器的渲染机制不同，在渲染页面时会出现两种常见的不良现象—-白屏问题和FOUS（无样式内容闪烁）\u003C\u002Fb\u003E\u003C\u002Fp\u003E\u003Cp\u003EFOUC：由于浏览器渲染机制（比如firefox），再CSS加载之前，先呈现了HTML，就会导致展示出无样式内容，然后样式突然呈现的现象；\u003C\u002Fp\u003E\u003Cp\u003E白屏：有些浏览器渲染机制（比如chrome）要先构建DOM树和CSSOM树，构建完成后再进行渲染，如果CSS部分放在HTML尾部，由于CSS未加载完成，浏览器迟迟未渲染，从而导致白屏；也可能是把js文件放在头部，脚本会阻塞后面内容的呈现，脚本会阻塞其后组件的下载，出现白屏问题。\u003C\u002Fp\u003E\u003Ch2\u003E总结\u003C\u002Fh2\u003E\u003Cp class=\"ztext-empty-paragraph\"\u003E\u003Cbr\u002F\u003E\u003C\u002Fp\u003E\u003Cfigure data-size=\"normal\"\u003E\u003Cnoscript\u003E\u003Cimg src=\"https:\u002F\u002Fpic1.zhimg.com\u002Fv2-55beee5c9129cb62e2655c7ed47eb190_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"713\" data-rawheight=\"195\" class=\"origin_image zh-lightbox-thumb\" width=\"713\" data-original=\"https:\u002F\u002Fpic1.zhimg.com\u002Fv2-55beee5c9129cb62e2655c7ed47eb190_r.jpg\"\u002F\u003E\u003C\u002Fnoscript\u003E\u003Cimg src=\"data:image\u002Fsvg+xml;utf8,&lt;svg xmlns=&#39;http:\u002F\u002Fwww.w3.org\u002F2000\u002Fsvg&#39; width=&#39;713&#39; height=&#39;195&#39;&gt;&lt;\u002Fsvg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"713\" data-rawheight=\"195\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"713\" data-original=\"https:\u002F\u002Fpic1.zhimg.com\u002Fv2-55beee5c9129cb62e2655c7ed47eb190_r.jpg\" data-actualsrc=\"https:\u002F\u002Fpic1.zhimg.com\u002Fv2-55beee5c9129cb62e2655c7ed47eb190_b.jpg\"\u002F\u003E\u003C\u002Ffigure\u003E\u003Cp class=\"ztext-empty-paragraph\"\u003E\u003Cbr\u002F\u003E\u003C\u002Fp\u003E\u003Cul\u003E\u003Cli\u003E浏览器工作流程：构建DOM -&gt; 构建CSSOM -&gt; 构建渲染树 -&gt; 布局 -&gt; 绘制。\u003C\u002Fli\u003E\u003Cli\u003ECSSOM会阻塞渲染，只有当CSSOM构建完毕后才会进入下一个阶段构建渲染树。\u003C\u002Fli\u003E\u003Cli\u003E通常情况下DOM和CSSOM是并行构建的，但是当浏览器遇到一个script标签时，DOM构建将暂停，直至脚本完成执行。但由于JavaScript可以修改CSSOM，所以需要等CSSOM构建完毕后再执行JS。\u003C\u002Fli\u003E\u003Cli\u003E如果你想首屏渲染的越快，就越不应该在首屏就加载 JS 文件，建议将 script 标签放在 body 标签底部。\u003C\u002Fli\u003E\u003C\u002Ful\u003E\u003Ch2\u003E参考文章\u003C\u002Fh2\u003E\u003Cul\u003E\u003Cli\u003E\u003Ca href=\"https:\u002F\u002Flink.zhihu.com\u002F?target=https%3A\u002F\u002Fsegmentfault.com\u002Fq\u002F1010000000640869\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\"\u003Easync 和 defer 的区别 | SegmentFault\u003C\u002Fa\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Ca href=\"https:\u002F\u002Flink.zhihu.com\u002F?target=https%3A\u002F\u002Fcoolshell.cn\u002Farticles\u002F9666.html\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\"\u003E浏览器的渲染原理简介\u003C\u002Fa\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Ca href=\"https:\u002F\u002Flink.zhihu.com\u002F?target=https%3A\u002F\u002Fjuejin.im\u002Fbook\u002F5bdc715fe51d454e755f75ef\u002Fsection\u002F5c024ecbf265da616a476638\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\"\u003E前端面试之道\u003C\u002Fa\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Ca href=\"https:\u002F\u002Flink.zhihu.com\u002F?target=https%3A\u002F\u002Fjuejin.im\u002Fentry\u002F59e1d31f51882578c3411c77\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\"\u003E浏览器的渲染：过程与原理\u003C\u002Fa\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Ca href=\"https:\u002F\u002Flink.zhihu.com\u002F?target=https%3A\u002F\u002Fsegmentfault.com\u002Fa\u002F1190000017329980\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\"\u003E你真的了解回流和重绘吗\u003C\u002Fa\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Ca href=\"https:\u002F\u002Flink.zhihu.com\u002F?target=https%3A\u002F\u002Fmp.weixin.qq.com\u002Fs%3F__biz%3DMzA5NzkwNDk3MQ%3D%3D%26mid%3D2650588806%26idx%3D1%26sn%3D408a54e7c8102fd6944c9a40b119015a%26chksm%3D8891d6a2bfe65fb42f493fe9a4dab672dd7e440f31e753196cee0cfbc6696e4f8dd3a669e040%26mpshare%3D1%26scene%3D1%26srcid%3D1228ZrXsmbZKcgCSu7zTVDwy%23\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\"\u003E关键渲染路径\u003C\u002Fa\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Ca href=\"https:\u002F\u002Flink.zhihu.com\u002F?target=https%3A\u002F\u002Fwww.css88.com\u002Farchives\u002F4996\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\"\u003E页面重绘和回流以及优化\u003C\u002Fa\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Ca href=\"https:\u002F\u002Flink.zhihu.com\u002F?target=https%3A\u002F\u002Fjuejin.im\u002Fpost\u002F5c15f797f265da61141c7f86\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\"\u003E浏览器重绘(repaint)重排(reflow)与优化[浏览器机制]\u003C\u002Fa\u003E\u003C\u002Fli\u003E\u003C\u002Ful\u003E\u003Cp class=\"ztext-empty-paragraph\"\u003E\u003Cbr\u002F\u003E\u003C\u002Fp\u003E\u003Ch2\u003E关于Fundebug\u003C\u002Fh2\u003E\u003Cp\u003E\u003Cbr\u002F\u003E\u003Ca href=\"https:\u002F\u002Flink.zhihu.com\u002F?target=https%3A\u002F\u002Fwww.fundebug.com\u002F\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\"\u003EFundebug\u003C\u002Fa\u003E专注于JavaScript、微信小程序、微信小游戏、支付宝小程序、React Native、Node.js和Java线上应用实时BUG监控。 自从2016年双十一正式上线，Fundebug累计处理了9亿+错误事件，付费客户有Google、360、金山软件、百姓网等众多品牌企业。欢迎大家\u003Ca href=\"https:\u002F\u002Flink.zhihu.com\u002F?target=https%3A\u002F\u002Fwww.fundebug.com\u002Fteam\u002Fcreate\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\"\u003E免费试用\u003C\u002Fa\u003E！\u003C\u002Fp\u003E\u003Cp class=\"ztext-empty-paragraph\"\u003E\u003Cbr\u002F\u003E\u003C\u002Fp\u003E\u003Cfigure data-size=\"normal\"\u003E\u003Cnoscript\u003E\u003Cimg src=\"https:\u002F\u002Fpic1.zhimg.com\u002Fv2-3fac5a61d4630017310b198449c2a118_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"494\" data-rawheight=\"278\" class=\"origin_image zh-lightbox-thumb\" width=\"494\" data-original=\"https:\u002F\u002Fpic1.zhimg.com\u002Fv2-3fac5a61d4630017310b198449c2a118_r.jpg\"\u002F\u003E\u003C\u002Fnoscript\u003E\u003Cimg src=\"data:image\u002Fsvg+xml;utf8,&lt;svg xmlns=&#39;http:\u002F\u002Fwww.w3.org\u002F2000\u002Fsvg&#39; width=&#39;494&#39; height=&#39;278&#39;&gt;&lt;\u002Fsvg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"494\" data-rawheight=\"278\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"494\" data-original=\"https:\u002F\u002Fpic1.zhimg.com\u002Fv2-3fac5a61d4630017310b198449c2a118_r.jpg\" data-actualsrc=\"https:\u002F\u002Fpic1.zhimg.com\u002Fv2-3fac5a61d4630017310b198449c2a118_b.jpg\"\u002F\u003E\u003C\u002Ffigure\u003E\u003Cp class=\"ztext-empty-paragraph\"\u003E\u003Cbr\u002F\u003E\u003C\u002Fp\u003E\u003Ch2\u003E版权声明\u003C\u002Fh2\u003E\u003Cp\u003E\u003Cbr\u002F\u003E转载时请注明作者a href=&#34;\u003Ca href=\"https:\u002F\u002Flink.zhihu.com\u002F?target=https%3A\u002F\u002Ffundebug.com\u002F\" class=\" external\" target=\"_blank\" rel=\"nofollow noreferrer\"\u003E\u003Cspan class=\"invisible\"\u003Ehttps:\u002F\u002F\u003C\u002Fspan\u003E\u003Cspan class=\"visible\"\u003Efundebug.com\u002F\u003C\u002Fspan\u003E\u003Cspan class=\"invisible\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003E&#34;&gt; Fundebug以及本文地址：\u003Cbr\u002F\u003E\u003Cb\u003E\u003Ca href=\"https:\u002F\u002Flink.zhihu.com\u002F?target=https%3A\u002F\u002Fblog.fundebug.com\u002F2019\u002F01\u002F03\u002Funderstand-browser-rendering\u002F\" class=\" external\" target=\"_blank\" rel=\"nofollow noreferrer\"\u003E\u003Cspan class=\"invisible\"\u003Ehttps:\u002F\u002F\u003C\u002Fspan\u003E\u003Cspan class=\"visible\"\u003Eblog.fundebug.com\u002F2019\u002F\u003C\u002Fspan\u003E\u003Cspan class=\"invisible\"\u003E01\u002F03\u002Funderstand-browser-rendering\u002F\u003C\u002Fspan\u003E\u003Cspan class=\"ellipsis\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003E\u003C\u002Fb\u003E\u003C\u002Fp\u003E","adminClosedComment":false,"topics":[{"url":"https:\u002F\u002Fwww.zhihu.com\u002Fapi\u002Fv4\u002Ftopics\u002F19550901","type":"topic","id":"19550901","name":"前端开发"},{"url":"https:\u002F\u002Fwww.zhihu.com\u002Fapi\u002Fv4\u002Ftopics\u002F19552330","type":"topic","id":"19552330","name":"程序员"},{"url":"https:\u002F\u002Fwww.zhihu.com\u002Fapi\u002Fv4\u002Ftopics\u002F19552572","type":"topic","id":"19552572","name":"网页浏览器"}],"voteupCount":54,"voting":0,"column":{"description":"","canManage":false,"intro":"分享有趣的技术","isFollowing":false,"urlToken":"fundebug","id":"fundebug","articlesCount":393,"acceptSubmission":true,"title":"Fundebug","url":"https:\u002F\u002Fzhuanlan.zhihu.com\u002Ffundebug","commentPermission":"all","created":1490337946,"updated":1525748208,"imageUrl":"https:\u002F\u002Fpic4.zhimg.com\u002Fv2-f4e072205be968bf035f63ef72b871ea_b.jpg","author":{"isFollowed":false,"avatarUrlTemplate":"https:\u002F\u002Fpic2.zhimg.com\u002Fv2-777d2d0550cca5b8de8059993dedf907_{size}.jpg","uid":"827879025467854848","userType":"people","isFollowing":false,"urlToken":"fundebug","id":"04328c265e70032f5f458ed3c7d79da7","description":"实时监控前端网页、微信小程序、微信小游戏、支付宝小程序、React Native、Node.js和Java应用BUG，第一时间报警，快速修复BUG!","name":"Fundebug","isAdvertiser":false,"headline":"一行代码搞定BUG监控：www.fundebug.com","gender":0,"url":"\u002Fpeople\u002F04328c265e70032f5f458ed3c7d79da7","avatarUrl":"https:\u002F\u002Fpic2.zhimg.com\u002Fv2-777d2d0550cca5b8de8059993dedf907_l.jpg","isOrg":false,"type":"people"},"followers":4150,"type":"column"},"commentCount":4,"contributions":[{"id":20041806,"state":"accepted","type":"first_publish","column":{"description":"","canManage":false,"intro":"分享有趣的技术","isFollowing":false,"urlToken":"fundebug","id":"fundebug","articlesCount":393,"acceptSubmission":true,"title":"Fundebug","url":"https:\u002F\u002Fzhuanlan.zhihu.com\u002Ffundebug","commentPermission":"all","created":1490337946,"updated":1525748208,"imageUrl":"https:\u002F\u002Fpic4.zhimg.com\u002Fv2-f4e072205be968bf035f63ef72b871ea_b.jpg","author":{"isFollowed":false,"avatarUrlTemplate":"https:\u002F\u002Fpic2.zhimg.com\u002Fv2-777d2d0550cca5b8de8059993dedf907_{size}.jpg","uid":"827879025467854848","userType":"people","isFollowing":false,"urlToken":"fundebug","id":"04328c265e70032f5f458ed3c7d79da7","description":"实时监控前端网页、微信小程序、微信小游戏、支付宝小程序、React Native、Node.js和Java应用BUG，第一时间报警，快速修复BUG!","name":"Fundebug","isAdvertiser":false,"headline":"一行代码搞定BUG监控：www.fundebug.com","gender":0,"url":"\u002Fpeople\u002F04328c265e70032f5f458ed3c7d79da7","avatarUrl":"https:\u002F\u002Fpic2.zhimg.com\u002Fv2-777d2d0550cca5b8de8059993dedf907_l.jpg","isOrg":false,"type":"people"},"followers":4150,"type":"column"}}],"isTitleImageFullScreen":false,"upvotedFollowees":[],"commercialInfo":{"isCommercial":false,"plugin":{}},"suggestEdit":{"status":false,"reason":"","tip":"","url":"","title":""},"reason":"","annotationAction":[],"canTip":false,"tipjarorsCount":0,"isLabeled":false,"hasPublishingDraft":false,"isFavorited":false,"isNormal":true,"status":0,"shareText":"深入浅出浏览器渲染原理 - 来自知乎专栏「Fundebug」，作者: Fundebug https:\u002F\u002Fzhuanlan.zhihu.com\u002Fp\u002F53913989 （想看更多？下载 @知乎 App：http:\u002F\u002Fweibo.com\u002Fp\u002F100404711598 ）","canComment":{"status":true,"reason":""},"mcnFpShow":-1}},"columns":{"fundebug":{"description":"","canManage":false,"intro":"分享有趣的技术","isFollowing":false,"urlToken":"fundebug","id":"fundebug","articlesCount":393,"acceptSubmission":true,"title":"Fundebug","url":"https:\u002F\u002Fzhuanlan.zhihu.com\u002Ffundebug","commentPermission":"all","created":1490337946,"updated":1525748208,"imageUrl":"https:\u002F\u002Fpic4.zhimg.com\u002Fv2-f4e072205be968bf035f63ef72b871ea_b.jpg","author":{"isFollowed":false,"avatarUrlTemplate":"https:\u002F\u002Fpic2.zhimg.com\u002Fv2-777d2d0550cca5b8de8059993dedf907_{size}.jpg","uid":"827879025467854848","userType":"people","isFollowing":false,"urlToken":"fundebug","id":"04328c265e70032f5f458ed3c7d79da7","description":"实时监控前端网页、微信小程序、微信小游戏、支付宝小程序、React Native、Node.js和Java应用BUG，第一时间报警，快速修复BUG!","name":"Fundebug","isAdvertiser":false,"headline":"一行代码搞定BUG监控：www.fundebug.com","gender":0,"url":"\u002Fpeople\u002F04328c265e70032f5f458ed3c7d79da7","avatarUrl":"https:\u002F\u002Fpic2.zhimg.com\u002Fv2-777d2d0550cca5b8de8059993dedf907_l.jpg","isOrg":false,"type":"people"},"followers":4150,"type":"column"}},"topics":{},"roundtables":{},"favlists":{},"comments":{},"notifications":{},"ebooks":{},"activities":{},"feeds":{},"pins":{},"promotions":{},"drafts":{},"chats":{},"posts":{},"clubs":{}},"currentUser":"610d434a9cafb703aee32ce98c73fc48","account":{"lockLevel":{},"unlockTicketStatus":false,"unlockTicket":null,"challenge":[],"errorStatus":false,"message":"","isFetching":false,"accountInfo":{},"urlToken":{"loading":false}},"settings":{"socialBind":null,"inboxMsg":null,"notification":{},"email":{},"privacyFlag":null,"blockedUsers":{"isFetching":false,"paging":{"pageNo":1,"pageSize":6},"data":[]},"blockedFollowees":{"isFetching":false,"paging":{"pageNo":1,"pageSize":6},"data":[]},"ignoredTopics":{"isFetching":false,"paging":{"pageNo":1,"pageSize":6},"data":[]},"restrictedTopics":null,"laboratory":{}},"notification":{},"people":{"profileStatus":{},"activitiesByUser":{},"answersByUser":{},"answersSortByVotesByUser":{},"answersIncludedByUser":{},"votedAnswersByUser":{},"thankedAnswersByUser":{},"voteAnswersByUser":{},"thankAnswersByUser":{},"topicAnswersByUser":{},"articlesByUser":{},"articlesSortByVotesByUser":{},"articlesIncludedByUser":{},"pinsByUser":{},"questionsByUser":{},"commercialQuestionsByUser":{},"favlistsByUser":{},"followingByUser":{},"followersByUser":{},"mutualsByUser":{},"followingColumnsByUser":{},"followingQuestionsByUser":{},"followingFavlistsByUser":{},"followingTopicsByUser":{},"publicationsByUser":{},"columnsByUser":{},"allFavlistsByUser":{},"brands":null,"creationsByUser":{},"creationsSortByVotesByUser":{}},"env":{"ab":{"config":{"experiments":[{"expId":"launch-li_vertical_move-2","expPrefix":"li_vertical_move","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"launch-nw_zhuantigaiban-2","expPrefix":"nw_zhuantigaiban","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"launch-nw_zhuantikapian-2","expPrefix":"nw_zhuantikapian","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"launch-qa_answer_update-2","expPrefix":"qa_answer_update","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"launch-rec_km_item_cf-2","expPrefix":"rec_km_item_cf","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"launch-rec_km_zann-2","expPrefix":"rec_km_zann","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"launch-rec_slot_prerank-2","expPrefix":"rec_slot_prerank","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"launch-se_collegecm-3","expPrefix":"se_collegecm","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"launch-se_ctr_pyc-3","expPrefix":"se_ctr_pyc","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"launch-se_ctr_topic-3","expPrefix":"se_ctr_topic","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"launch-se_ctr_user-3","expPrefix":"se_ctr_user","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"launch-se_hot__timebox-2","expPrefix":"se_hot__timebox","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"launch-se_ios_spb309-5","expPrefix":"se_ios_spb309","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"launch-se_ltr_user-2","expPrefix":"se_ltr_user","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"launch-se_payconsult-3","expPrefix":"se_payconsult","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"launch-se_subtext-2","expPrefix":"se_subtext","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"launch-se_wannasearch-5","expPrefix":"se_wannasearch","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"launch-se_webtimebox-2","expPrefix":"se_webtimebox","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"launch-se_whitelist-2","expPrefix":"se_whitelist","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"launch-top_billsheep2-2","expPrefix":"top_billsheep2","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"launch-top_hotchild-2","expPrefix":"top_hotchild","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"launch-top_vote-2","expPrefix":"top_vote","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"launch-tp_and_sticky-2","expPrefix":"tp_and_sticky","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"launch-us_bigone-10","expPrefix":"us_bigone","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"launch-us_foltopic_user-10","expPrefix":"us_foltopic_user","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"launch-us_newguide3-11","expPrefix":"us_newguide3","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"launch-us_notification-2","expPrefix":"us_notification","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"launch-us_n_web_msg-5","expPrefix":"us_n_web_msg","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"launch-vd_video_ad-1","expPrefix":"vd_video_ad","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"li_qa_new_cover-8","expPrefix":"li_qa_new_cover","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"li_search_answer-6","expPrefix":"li_search_answer","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"se_expire_ob-1","expPrefix":"se_expire_ob","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"se_likebutton-1","expPrefix":"se_likebutton","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"se_dnn_unbias-4","expPrefix":"se_dnn_unbias","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"se_zu_onebox-3","expPrefix":"se_zu_onebox","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"se_backsearch-1","expPrefix":"se_backsearch","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"se_perf-1","expPrefix":"se_perf","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"us_bignew-7","expPrefix":"us_bignew","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"us_update-6","expPrefix":"us_update","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"top_native_ans-3","expPrefix":"top_native_ans","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"top_vipconsume-1","expPrefix":"top_vipconsume","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"tp_club-9","expPrefix":"tp_club","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"top_hotctr-5","expPrefix":"top_hotctr","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"top_newchild-7","expPrefix":"top_newchild","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"rec_intervene-5","expPrefix":"rec_intervene","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"rec_test_aa1-10","expPrefix":"rec_test_aa1","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false},{"expId":"qa_same_question-2","expPrefix":"qa_same_question","isDynamicallyUpdated":true,"isRuntime":false,"includeTriggerInfo":false}],"params":[{"id":"li_qa_cover","type":"String","value":"old","chainId":"_all_"},{"id":"zr_man_intervene","type":"String","value":"0","chainId":"_all_"},{"id":"se_ios_spb309","type":"String","value":"1","chainId":"_all_"},{"id":"se_aa_base","type":"String","value":"0","chainId":"_all_"},{"id":"se_adxtest","type":"String","value":"1","chainId":"_all_"},{"id":"pf_foltopic_usernum","type":"String","value":"50","chainId":"_all_"},{"id":"ug_follow_answerer","type":"String","value":"0","chainId":"_all_"},{"id":"li_album_liutongab","type":"String","value":"0","chainId":"_all_"},{"id":"zr_cold_start","type":"String","value":"0","chainId":"_all_"},{"id":"zr_rel_search","type":"String","value":"base","chainId":"_all_"},{"id":"zr_article_new","type":"String","value":"close","chainId":"_all_"},{"id":"se_ctr_user","type":"String","value":"1","chainId":"_all_"},{"id":"se_zu_recommend","type":"String","value":"0","chainId":"_all_"},{"id":"li_search_answer","type":"String","value":"3","chainId":"_all_"},{"id":"web_answer_list_ad","type":"String","value":"1"},{"id":"se_payconsult","type":"String","value":"5","chainId":"_all_"},{"id":"ug_follow_answerer_0","type":"String","value":"0","chainId":"_all_"},{"id":"top_ydyq","type":"String","value":"X","chainId":"_all_"},{"id":"zr_test_aa1","type":"String","value":"1","chainId":"_all_"},{"id":"soc_update","type":"String","value":"0","chainId":"_all_"},{"id":"pf_creator_card","type":"String","value":"1","chainId":"_all_"},{"id":"zr_km_topic_zann","type":"String","value":"new","chainId":"_all_"},{"id":"zr_search_xgb","type":"String","value":"1","chainId":"_all_"},{"id":"se_waterfall","type":"String","value":"0","chainId":"_all_"},{"id":"se_cardrank_4","type":"String","value":"0","chainId":"_all_"},{"id":"tsp_hotctr","type":"String","value":"2","chainId":"_all_"},{"id":"li_se_heat","type":"String","value":"0","chainId":"_all_"},{"id":"li_se_kv","type":"String","value":"0","chainId":"_all_"},{"id":"se_cardrank_2","type":"String","value":"0","chainId":"_all_"},{"id":"se_time_threshold","type":"String","value":"0","chainId":"_all_"},{"id":"se_use_zitem","type":"String","value":"0","chainId":"_all_"},{"id":"tp_qa_metacard","type":"String","value":"1","chainId":"_all_"},{"id":"ug_zero_follow_0","type":"String","value":"0","chainId":"_all_"},{"id":"li_android_vip","type":"String","value":"0","chainId":"_all_"},{"id":"zr_ans_rec","type":"String","value":"gbrank","chainId":"_all_"},{"id":"zr_km_feed_prerank","type":"String","value":"new","chainId":"_all_"},{"id":"zr_video_recall","type":"String","value":"current_recall","chainId":"_all_"},{"id":"se_famous","type":"String","value":"1","chainId":"_all_"},{"id":"soc_bigone","type":"String","value":"1","chainId":"_all_"},{"id":"ug_newtag","type":"String","value":"1","chainId":"_all_"},{"id":"ls_new_upload","type":"String","value":"0","chainId":"_all_"},{"id":"zr_km_item_cf","type":"String","value":"open","chainId":"_all_"},{"id":"top_vipconsume","type":"String","value":"1","chainId":"_all_"},{"id":"li_hot_score_ab","type":"String","value":"0","chainId":"_all_"},{"id":"se_dnn_unbias","type":"String","value":"1","chainId":"_all_"},{"id":"se_perf","type":"String","value":"0","chainId":"_all_"},{"id":"se_cardrank_3","type":"String","value":"0","chainId":"_all_"},{"id":"top_universalebook","type":"String","value":"1","chainId":"_all_"},{"id":"ls_fmp4","type":"String","value":"0","chainId":"_all_"},{"id":"tsp_childbillboard","type":"String","value":"2","chainId":"_all_"},{"id":"soc_zcfw_shipinshiti","type":"String","value":"0","chainId":"_all_"},{"id":"gue_new_special_page","type":"String","value":"1"},{"id":"se_lottery","type":"String","value":"0","chainId":"_all_"},{"id":"top_ebook","type":"String","value":"0","chainId":"_all_"},{"id":"top_root","type":"String","value":"0","chainId":"_all_"},{"id":"top_hotcommerce","type":"String","value":"1","chainId":"_all_"},{"id":"li_salt_hot","type":"String","value":"0","chainId":"_all_"},{"id":"li_se_section","type":"String","value":"0","chainId":"_all_"},{"id":"web_answer_update","type":"String","value":"1"},{"id":"zr_answer_rec_cp","type":"String","value":"open","chainId":"_all_"},{"id":"se_com_boost","type":"String","value":"2","chainId":"_all_"},{"id":"se_webrs","type":"String","value":"1","chainId":"_all_"},{"id":"top_new_feed","type":"String","value":"5","chainId":"_all_"},{"id":"tsp_vote","type":"String","value":"2","chainId":"_all_"},{"id":"zr_video_rank_nn","type":"String","value":"new_rank","chainId":"_all_"},{"id":"se_whitelist","type":"String","value":"1","chainId":"_all_"},{"id":"ug_goodcomment_0","type":"String","value":"1","chainId":"_all_"},{"id":"li_book_button","type":"String","value":"0","chainId":"_all_"},{"id":"zr_km_answer","type":"String","value":"open_cvr","chainId":"_all_"},{"id":"se_ltr_dnn_cp","type":"String","value":"0","chainId":"_all_"},{"id":"se_cardrank_1","type":"String","value":"0","chainId":"_all_"},{"id":"se_hotsearch","type":"String","value":"1","chainId":"_all_"},{"id":"li_se_paid_answer","type":"String","value":"0","chainId":"_all_"},{"id":"li_pay_banner_type","type":"String","value":"0","chainId":"_all_"},{"id":"gue_goods_card","type":"String","value":"0"},{"id":"se_ctr_pyc","type":"String","value":"1","chainId":"_all_"},{"id":"se_site_onebox","type":"String","value":"0","chainId":"_all_"},{"id":"se_backsearch","type":"String","value":"0","chainId":"_all_"},{"id":"se_college_cm","type":"String","value":"1","chainId":"_all_"},{"id":"tp_sticky_android","type":"String","value":"2","chainId":"_all_"},{"id":"soc_notification","type":"String","value":"1","chainId":"_all_"},{"id":"li_purchase_test","type":"String","value":"0","chainId":"_all_"},{"id":"zr_infinity_member","type":"String","value":"close","chainId":"_all_"},{"id":"zr_rec_answer_cp","type":"String","value":"close","chainId":"_all_"},{"id":"se_webmajorob","type":"String","value":"0","chainId":"_all_"},{"id":"se_qua_boost","type":"String","value":"0","chainId":"_all_"},{"id":"se_auto_syn","type":"String","value":"0","chainId":"_all_"},{"id":"se_featured","type":"String","value":"1","chainId":"_all_"},{"id":"tp_club_qa","type":"String","value":"0","chainId":"_all_"},{"id":"ls_videoad","type":"String","value":"2","chainId":"_all_"},{"id":"se_topiclabel","type":"String","value":"1","chainId":"_all_"},{"id":"se_wannasearch","type":"String","value":"a","chainId":"_all_"},{"id":"se_movietab","type":"String","value":"1","chainId":"_all_"},{"id":"top_v_album","type":"String","value":"1","chainId":"_all_"},{"id":"se_p_slideshow","type":"String","value":"0","chainId":"_all_"},{"id":"ug_follow_topic_1","type":"String","value":"2","chainId":"_all_"},{"id":"gue_anonymous","type":"String","value":"show"},{"id":"web_sem_ab","type":"String","value":"0"},{"id":"li_se_xgb","type":"String","value":"0","chainId":"_all_"},{"id":"web_answerlist_ad","type":"String","value":"0"},{"id":"web_question_invite","type":"String","value":"B"},{"id":"zr_km_slot_style","type":"String","value":"event_card","chainId":"_all_"},{"id":"zr_slot_cold_start","type":"String","value":"aver","chainId":"_all_"},{"id":"se_likebutton","type":"String","value":"0","chainId":"_all_"},{"id":"se_col_boost","type":"String","value":"0","chainId":"_all_"},{"id":"se_zu_onebox","type":"String","value":"4","chainId":"_all_"},{"id":"se_hot_timebox","type":"String","value":"1","chainId":"_all_"},{"id":"se_agency","type":"String","value":" 0","chainId":"_all_"},{"id":"tp_m_intro_re_topic","type":"String","value":"1","chainId":"_all_"},{"id":"qap_payc_invite","type":"String","value":"0","chainId":"_all_"},{"id":"zr_km_prerank","type":"String","value":"new","chainId":"_all_"},{"id":"se_spb309","type":"String","value":"0","chainId":"_all_"},{"id":"se_mobileweb","type":"String","value":"1","chainId":"_all_"},{"id":"tp_sft_v2","type":"String","value":"d","chainId":"_all_"},{"id":"top_native_answer","type":"String","value":"2","chainId":"_all_"},{"id":"li_qa_new_cover","type":"String","value":"0","chainId":"_all_"},{"id":"zr_intervene","type":"String","value":"0","chainId":"_all_"},{"id":"se_mclick1","type":"String","value":"0","chainId":"_all_"},{"id":"se_new_topic","type":"String","value":"0","chainId":"_all_"},{"id":"se_search_feed","type":"String","value":"N","chainId":"_all_"},{"id":"tp_meta_card","type":"String","value":"0","chainId":"_all_"},{"id":"soc_special","type":"String","value":"0","chainId":"_all_"},{"id":"pf_fuceng","type":"String","value":"1","chainId":"_all_"},{"id":"zr_item_nn_recall","type":"String","value":"close","chainId":"_all_"},{"id":"zr_km_style","type":"String","value":"base","chainId":"_all_"},{"id":"se_mctr","type":"String","value":"1","chainId":"_all_"},{"id":"se_college","type":"String","value":"default","chainId":"_all_"},{"id":"se_ad_index","type":"String","value":"10","chainId":"_all_"},{"id":"soc_bignew","type":"String","value":"1","chainId":"_all_"},{"id":"web_heifetz_grow_ad","type":"String","value":"1"},{"id":"li_video_section","type":"String","value":"0","chainId":"_all_"},{"id":"zr_km_item_prerank","type":"String","value":"old","chainId":"_all_"},{"id":"zr_km_recall","type":"String","value":"default","chainId":"_all_"},{"id":"se_websearch","type":"String","value":"3","chainId":"_all_"},{"id":"se_ltr_user","type":"String","value":"1","chainId":"_all_"},{"id":"tsp_newchild","type":"String","value":"4","chainId":"_all_"},{"id":"pf_noti_entry_num","type":"String","value":"0","chainId":"_all_"},{"id":"web_n_web_msg","type":"String","value":"1"},{"id":"zw_payc_qaedit","type":"String","value":"0","chainId":"_all_"},{"id":"zw_sameq_sorce","type":"String","value":"995","chainId":"_all_"},{"id":"zr_art_rec","type":"String","value":"base","chainId":"_all_"},{"id":"se_webtimebox","type":"String","value":"1","chainId":"_all_"},{"id":"se_amovietab","type":"String","value":"1","chainId":"_all_"},{"id":"li_vip_no_ad_mon","type":"String","value":"0","chainId":"_all_"},{"id":"se_subtext","type":"String","value":"1","chainId":"_all_"},{"id":"web_column_auto_invite","type":"String","value":"0"},{"id":"tp_qa_toast","type":"String","value":"1","chainId":"_all_"},{"id":"tp_header_style","type":"String","value":"1","chainId":"_all_"},{"id":"sem_up_growth","type":"String","value":"in_app","chainId":"_all_"},{"id":"se_dnn_mt","type":"String","value":"0","chainId":"_all_"},{"id":"se_colorfultab","type":"String","value":"1","chainId":"_all_"},{"id":"soc_zuichangfangwen","type":"String","value":"0","chainId":"_all_"},{"id":"ls_zvideo_license","type":"String","value":"0","chainId":"_all_"},{"id":"li_se_album_card","type":"String","value":"0","chainId":"_all_"},{"id":"li_se_vertical","type":"String","value":"1","chainId":"_all_"},{"id":"se_go_ztext","type":"String","value":"0","chainId":"_all_"},{"id":"se_preset_tech","type":"String","value":"0","chainId":"_all_"},{"id":"tp_qa_metacard_top","type":"String","value":"top","chainId":"_all_"},{"id":"tp_topic_head","type":"String","value":"0","chainId":"_all_"},{"id":"ug_zero_follow","type":"String","value":"0","chainId":"_all_"},{"id":"ug_fw_answ_aut_1","type":"String","value":"0","chainId":"_all_"},{"id":"se_billboardsearch","type":"String","value":"0","chainId":"_all_"},{"id":"tp_sft","type":"String","value":"a","chainId":"_all_"},{"id":"top_test_4_liguangyi","type":"String","value":"1","chainId":"_all_"},{"id":"pf_newguide_vertical","type":"String","value":"0","chainId":"_all_"},{"id":"li_tjys_ec_ab","type":"String","value":"0","chainId":"_all_"},{"id":"gue_zhuantikapian","type":"String","value":"1"},{"id":"zr_km_feed_nlp","type":"String","value":"old","chainId":"_all_"},{"id":"se_expired_ob","type":"String","value":"0","chainId":"_all_"},{"id":"se_mclick","type":"String","value":"0","chainId":"_all_"},{"id":"se_ctr_topic","type":"String","value":"1","chainId":"_all_"},{"id":"tsp_billboardsheep2","type":"String","value":"2","chainId":"_all_"},{"id":"zr_video_rank","type":"String","value":"new_rank","chainId":"_all_"},{"id":"top_quality","type":"String","value":"0","chainId":"_all_"}],"chains":[{"chainId":"_all_"}]},"triggers":{}},"userAgent":{"Edge":false,"Wechat":false,"Weibo":false,"QQ":false,"MQQBrowser":false,"Qzone":false,"Mobile":false,"Android":false,"iOS":false,"isAppleDevice":false,"Zhihu":false,"ZhihuHybrid":false,"isBot":false,"Tablet":false,"UC":false,"Sogou":false,"Qihoo":false,"Baidu":false,"BaiduApp":false,"Safari":false,"GoogleBot":false,"isWebView":false,"origin":"Mozilla\u002F5.0 (Windows NT 10.0; Win64; x64) AppleWebKit\u002F537.36 (KHTML, like Gecko) Chrome\u002F73.0.3683.86 Safari\u002F537.36"},"ctx":{"path":"\u002Fp\u002F53913989"},"trafficSource":"production","edition":{"baidu":false,"sogou":false,"baiduBeijing":false,"sogouBeijing":false},"theme":"light","enableShortcut":true,"referer":"https:\u002F\u002Flink.juejin.im\u002F?target=https%3A%2F%2Fzhuanlan.zhihu.com%2Fp%2F53913989","conf":{},"ipInfo":{"cityName":"Chengdu","countryName":"China","regionName":"Sichuan","countryCode":"CN"},"logged":true,"tdkInfo":{}},"me":{"columnContributions":[]},"label":{"recognizerLists":{}},"ecommerce":{},"comments":{"pagination":{},"collapsed":{},"reverse":{},"reviewing":{},"conversation":{},"parent":{}},"commentsV2":{"stickers":[],"commentWithPicPermission":{},"notificationsComments":{},"pagination":{},"collapsed":{},"reverse":{},"reviewing":{},"conversation":{},"conversationMore":{},"parent":{}},"pushNotifications":{"default":{"isFetching":false,"isDrained":false,"ids":[]},"follow":{"isFetching":false,"isDrained":false,"ids":[]},"vote_thank":{"isFetching":false,"isDrained":false,"ids":[]},"currentTab":"default","notificationsCount":{"default":0,"follow":0,"vote_thank":0}},"messages":{"data":{},"currentTab":"common","messageCount":0},"register":{"registerValidateSucceeded":null,"registerValidateErrors":{},"registerConfirmError":null,"sendDigitsError":null,"registerConfirmSucceeded":null},"login":{"loginUnregisteredError":false,"loginBindWechatError":false,"loginConfirmError":null,"sendDigitsError":null,"validateDigitsError":false,"loginConfirmSucceeded":null,"qrcodeLoginToken":"","qrcodeLoginScanStatus":0,"qrcodeLoginError":null,"qrcodeLoginReturnNewToken":false},"active":{"sendDigitsError":null,"activeConfirmSucceeded":null,"activeConfirmError":null},"switches":{},"captcha":{"captchaNeeded":false,"captchaValidated":false,"captchaBase64String":null,"captchaValidationMessage":null,"loginCaptchaExpires":false},"sms":{"supportedCountries":[]},"chat":{"chats":{},"inbox":{"recents":{"isFetching":false,"isDrained":false,"isPrevDrained":false,"result":[],"next":null,"key":null},"strangers":{"isFetching":false,"isDrained":false,"isPrevDrained":false,"result":[],"next":null,"key":null},"friends":{"isFetching":false,"isDrained":false,"isPrevDrained":false,"result":[],"next":null,"key":null},"search":{"isFetching":false,"isDrained":false,"isPrevDrained":false,"result":[],"next":null,"key":null},"config":{"newCount":0,"strangerMessageSwitch":false,"strangerMessageUnread":false,"friendCount":0}},"global":{"isChatMqttExisted":false}},"emoticons":{"emoticonGroupList":[],"emoticonGroupDetail":{}},"creator":{"currentCreatorUrlToken":null,"homeData":{"recommendQuestions":[]},"tools":{"question":{"invitationCount":{"questionFolloweeCount":0,"questionTotalCount":0},"goodatTopics":[]},"customPromotion":{"itemLists":{}},"recommend":{"recommendTimes":{}}},"explore":{"academy":{"tabs":[],"article":{}}},"rights":[],"rightsStatus":{},"levelUpperLimit":10,"account":{"growthLevel":{}},"applyStatus":{}},"recommendation":{"homeRecommendations":[]},"shareTexts":{},"articles":{"voters":{}},"previewPost":{},"favlists":{"relations":{}},"columns":{"voters":{}},"reward":{"answer":{},"article":{},"question":{}},"video":{"data":{},"shareVideoDetail":{},"last":{}},"topstory":{"recommend":{"isFetching":false,"isDrained":false,"afterId":0,"items":[],"next":null},"follow":{"isFetching":false,"isDrained":false,"afterId":0,"items":[],"next":null},"followWonderful":{"isFetching":false,"isDrained":false,"afterId":0,"items":[],"next":null},"sidebar":null,"announcement":{},"hotListCategories":[],"hotList":[],"guestFeeds":{"isFetching":false,"isDrained":false,"afterId":0,"items":[],"next":null},"followExtra":{"isNewUser":null,"isFetched":false,"followCount":0,"followers":[]}},"readStatus":{},"column":{},"requestColumn":{"categories":[],"error":null},"articleContribution":{"contributeRequests":[],"deleteContributeIdList":[],"handledContributeIdList":[],"recommendedColumns":[],"pinnedColumns":[],"sentContributeRequestsIdList":[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,"fundebug"]},"columnContribution":{"contributeRequests":[],"autoInviteEnabled":false,"recommendedContributors":[],"contributionInvitation":null},"draftHistory":{"history":{},"drafts":{}},"upload":{},"articleDraft":{"titleImage":"","titleImageSize":{},"isTitleImageFullScreen":false,"canTitleImageFullScreen":false,"title":"","titleImageUploading":false,"error":"","content":"","draftLoading":false,"updating":false,"globalLoading":false,"pendingVideo":{"resource":null,"error":null},"deleteFail":{"fail":false},"recommendTopics":[],"selectedColumn":0},"articleDrafts":{"isDrained":false,"isLoading":false,"items":[]},"columnAutocomplete":{"users":[],"friends":[]},"mcn":{"bindInfo":{},"memberCategoryList":[],"categoryList":[]}},"fetchHost":"www.zhihu.com","subAppName":"column"}<div><div style="display: none;">想来知乎工作？请发送邮件到 jobs@zhihu.com</div></div><div><div><div class="Editable-languageSuggestions" style="left: -1179px; top: -999px;"><div><div class="Popover"><div class="Editable-languageSuggestionsInput Input-wrapper"><input autocomplete="off" role="combobox" aria-expanded="false" aria-autocomplete="list" aria-activedescendant="AutoComplete17-0" id="Popover16-toggle" aria-haspopup="true" aria-owns="Popover16-content" class="Input" placeholder="选择语言" value=""><div class="Input-after"><svg class="Zi Zi--Select" fill="#afbdcf" viewBox="0 0 24 24" width="24" height="24"><path d="M12 16.183l2.716-2.966a.757.757 0 0 1 1.064.001.738.738 0 0 1 0 1.052l-3.247 3.512a.758.758 0 0 1-1.064 0L8.22 14.27a.738.738 0 0 1 0-1.052.758.758 0 0 1 1.063 0L12 16.183zm0-9.365L9.284 9.782a.758.758 0 0 1-1.064 0 .738.738 0 0 1 0-1.052l3.248-3.512a.758.758 0 0 1 1.065 0L15.78 8.73a.738.738 0 0 1 0 1.052.757.757 0 0 1-1.063.001L12 6.818z" fill-rule="evenodd"></path></svg></div></div></div></div></div></div></div></body></html>